(this["webpackJsonpunderstanding-economics"]=this["webpackJsonpunderstanding-economics"]||[]).push([[0],[,,,,,,,function(e){e.exports=JSON.parse('{"a":{"gender":{"id":"gender","title":"Gender","numeric":false,"description":"The gender of the respondent."},"income":{"id":"income","title":"Income","numeric":false,"description":"The annual income range of the respondent."},"born_us":{"id":"born_us","title":"Born in US","numeric":false,"description":"Whether the respondent was born in the U.S."}},"b":{"income_survey":{"title":"Income Survey","additional_groups":{},"topics":{"Economic Effects":{"description":"Questions about economic effects","id":"Economic Effects","title":"Economic Effects","questions":{"Q06006_en":{"id":"Q06006_en","title":"Economic Effect","numeric":false,"description":"The economic effect that the respondent believes.\\n<ul>\\n<li>Hello</li>\\n<li>Hello</li>\\n<li>Hello</li>\\n<li>Hello</li>\\n<li>Hello</li>\\n<li>Hello</li>\\n<li>Hello</li>\\n<li>Hello</li><li>Hello</li>\\n<li>Hello</li>\\n<li>Hello</li>\\n</ul>"},"Q06009_en":{"id":"Q06009_en","title":"Yes or No","numeric":false,"description":"A yes or no question where I don\'t know the question"}}},"Tax Cut":{"description":"Questions about the recent tax cut","id":"Tax Cut","title":"Tax Cut","questions":{"Q06007_en":{"id":"Q06007_en","title":"Tax Cut Deficit","numeric":false,"description":"How the respondents believes the tax cut affected the deficit"},"Q06008_en":{"id":"Q06008_en","title":"Tax Cut Deficit 2","numeric":false,"description":"Another tax cut deficit question"}}}}}}}')},,,function(e,t,n){e.exports=n(19)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var s=n(0),i=n.n(s),o=n(9),a=n.n(o),c=n(1),r=n(2),l=n(4),u=n(3),d=n(5),p=(n(15),n(7)),h=(i.a.Component,n(6)),v=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.props.selectedQuestion?i.a.createElement("div",{id:this.props.elementId}):null}},{key:"componentDidUpdate",value:function(){var e=this.props.selectedGroup,t=this.props.selectedQuestion,n=this.props.data,s=this.props.renderFunction;e&&t&&n&&s(this.props.elementId,e,t,n)}}]),t}(i.a.Component),m=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(v,{elementId:"crosstab",survey:this.props.survey,data:this.props.data,selectedGroup:this.props.selectedGroup,selectedQuestion:this.props.selectedQuestion,renderFunction:this.renderCrossTabs})}},{key:"renderCrossTabs",value:function(e,t,n,s){console.log("SELECTED GROUP: ".concat(t)),console.log("SELECTED QUESTION: ".concat(n));var i=s.map((function(e){return{group:e[t.id],response:e[n.id]||" No Response"}}));console.log(i),n.numeric?$("#".concat(e)).pivot(i,{rows:["group"],aggregator:$.pivotUtilities.aggregators.Average(["response"])}):$("#".concat(e)).pivot(i,{rows:["group"],cols:["response"],aggregator:$.pivotUtilities.aggregators.Count()})}}]),t}(i.a.Component),f=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(v,{elementId:"chart",survey:this.props.survey,data:this.props.data,selectedGroup:this.props.selectedGroup,selectedQuestion:this.props.selectedQuestion,renderFunction:this.renderChart})}},{key:"renderChart",value:function(e,t,n,s){n.numeric?$("#".concat(e)).pivot(cleanData,{rows:[t.id],aggregator:$.pivotUtilities.aggregators.Average(["response"]),renderer:$.pivotUtilities.c3_renderers["Horizontal Bar Chart"],rowOrder:"value_z_to_a"}):($("#".concat(e)).pivot(s,{rows:[t.id],cols:[n.id],aggregator:$.pivotUtilities.aggregators["Count as Fraction of Rows"](),renderer:$.pivotUtilities.c3_renderers["Horizontal Stacked Bar Chart"],rowOrder:"value_z_to_a",colOrder:"value_z_to_a"}),document.getElementById("chart").getElementsByTagName("p")[0].remove())}}]),t}(i.a.Component),y=(n(16),function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){if(!this.props.options)return null;var e,t=(e=this.props.options,Object.keys(e).map((function(t){return e[t]}))).map((function(e){return i.a.createElement("option",{value:e.id},e.title)})),n=this.props.selected?this.props.options[this.props.selected].description:"";return i.a.createElement("div",null,i.a.createElement("div",{className:"row"},i.a.createElement("h4",null,this.props.title)),i.a.createElement("div",{className:"row"},i.a.createElement("span",null,this.props.description)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-md-4"},i.a.createElement("select",{className:"pull-left",size:6,value:this.props.selected,onChange:this.props.handleSelect},t)),i.a.createElement("div",{className:"col-md"},i.a.createElement("span",{className:"align-top align-text-top",dangerouslySetInnerHTML:{__html:n}}))))}}]),t}(i.a.Component));var g=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={selectedGroup:void 0,selectedTopic:void 0,selectedQuestion:void 0},e.handleGroupSelect=e.handleGroupSelect.bind(Object(h.a)(e)),e.handleTopicSelect=e.handleTopicSelect.bind(Object(h.a)(e)),e.handleQuestionSelect=e.handleQuestionSelect.bind(Object(h.a)(e)),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentWillMount",value:function(){this.survey=p.b[this.props.surveyId]}},{key:"render",value:function(){if(null==this.props.surveyId)throw new Error("Expected a survey id");return i.a.createElement("div",{className:"container"},i.a.createElement(y,{title:"Group",description:"Select how you would like to group responses",options:p.a,selected:this.state.selectedGroup,handleSelect:this.handleGroupSelect}),i.a.createElement(y,{title:"Topic",description:"Select a topic that you would like to examine",options:this.survey.topics,selected:this.state.selectedTopic,handleSelect:this.handleTopicSelect}),i.a.createElement(y,{title:"Question",description:"Select a question to examine",options:this.state.selectedTopic?this.survey.topics[this.state.selectedTopic].questions:null,selected:this.state.selectedQuestion,handleSelect:this.handleQuestionSelect}),i.a.createElement("div",{className:"row"},i.a.createElement(f,{survey:this.survey,data:this.state.surveyData,selectedGroup:p.a[this.state.selectedGroup],selectedQuestion:this.state.selectedQuestion?this.survey.topics[this.state.selectedTopic].questions[this.state.selectedQuestion]:null})),i.a.createElement("div",{className:"row"},i.a.createElement(m,{survey:this.survey,data:this.state.surveyData,selectedGroup:p.a[this.state.selectedGroup],selectedQuestion:this.state.selectedQuestion?this.survey.topics[this.state.selectedTopic].questions[this.state.selectedQuestion]:null})))}},{key:"componentDidMount",value:function(){var e=this;d3.csv("".concat("","/data/data_").concat(this.props.surveyId,".csv")).then((function(t){e.setState({surveyData:t})}))}},{key:"handleGroupSelect",value:function(e){this.setState({selectedGroup:e.target.value})}},{key:"handleTopicSelect",value:function(e){this.setState({selectedTopic:e.target.value,selectedQuestion:void 0})}},{key:"handleQuestionSelect",value:function(e){this.setState({selectedQuestion:e.target.value})}}]),t}(i.a.Component),b=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={surveyData:null,selectedGroup:null,selectedQuestion:null},e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(g,{surveyId:"income_survey"}))}},{key:"componentDidMount",value:function(){var e=this;console.log("".concat("","/data/data_income_survey.csv")),d3.csv("".concat("","/data/data_income_survey.csv")).then((function(t){console.log(t),e.setState({surveyData:t,selectedGroup:"income",selectedQuestion:"Q06006_en"})}))}}]),t}(i.a.Component);n(17),n(18);a.a.render(i.a.createElement(b,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.f2cd7a1e.chunk.js.map