{"version":3,"sources":["components/NavigationBar.js","components/ScrollableDesc.js","components/FieldSelect.js","components/NotFound.js","DataType.js","components/DataView.js","Colors.js","Utils.js","components/CrossTabView.js","components/StackedChartView.js","components/ChartLegend.js","components/CorrectDisplay.js","components/CategoricalDisplay.js","components/StatBubble.js","components/HistogramView.js","NumberFormats.js","components/NumericDisplay.js","components/TreatmentChartView.js","components/DummyChartView.js","components/TreatmentDisplay.js","components/ImageView.js","components/KeynessDisplay.js","components/WordcloudDisplay.js","components/UmbrellaDisplay.js","components/FrequencyChartView.js","components/FrequencyDisplay.js","components/DataDisplay.js","components/DataPage.js","components/DemoImage.js","components/TextComponents.js","components/HomePage.js","components/AboutPage.js","App.js","index.js"],"names":["NavigationBar","surveyLinks","Object","keys","surveys","map","surveyId","survey","className","activeClassName","to","title","class","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","exact","React","Component","ScrollableDesc","textStyle","minHeight","this","props","maxHeight","height","paddingRight","dangerouslySetInnerHTML","__html","content","style","ref","descDivRef","PureComponent","FieldSelect","slctDivRef","createRef","slctRef","options","dict","optionComponents","key","option","value","selectedTitle","selected","selectedDescription","description","size","onChange","handleSelect","current","selectedIndex","NotFound","DataType","CATEGORICAL","FREQUENCY","NUMERIC","TREATMENT","MULTICHOICE","KEYNESS","WORDCLOUD","UMBRELLA","DataView","selectedQuestion","width","marginLeft","elementId","componentDidUpdate","selectedGroup","renderFunction","data","filter","x","Colors","Histogram","Categorical","Gradient3","Gradient4","Gradient5","Utils","getUniqueDictVals","sorter","v","i","a","indexOf","trim","length","sort","getCounts","responseKey","responseVals","undefined","filteredData","countsDict","val","forEach","propsDict","getProportions","groupKey","groupVal","total","getQuestionSorter","question","$","pivotUtilities","sortAs","b","localeCompare","getGroupSorter","group","getColorPattern","colorPattern","color","CrossTabView","renderCrossTabs","cleanData","response","sorters","pivot","rows","cols","aggregator","aggregators","StackedChartView","renderChart","bind","groupSorter","responseSorter","groupVals","concat","proportions","chartData","responseVal","chart","c3","generate","merge","all","bindto","columns","groups","order","parent","pattern","legend","item","onclick","show","padding","left","tooltip","grouped","bar","ratio","rotated","categories","y","max","label","tick","format","d3","c3Override","document","getElementsByClassName","innerHTML","correct","bars","replace","setProperty","ChartLabel","getElementById","baseVal","receiveChart","ChartLegend","responses","legendItems","onMouseOver","charts","focus","onMouseLeave","revert","backgroundColor","margin","fontSize","maxWidth","marginRight","marginTop","opacity","CorrectDisplay","formatter","sourceText","source","source_url","href","target","verticalAlign","CategoricalDisplay","state","showTable","paddingLeft","onClick","toggleTable","marginBottom","setState","StatBubble","textDecoration","classNames","active","e","preventDefault","handleClick","toUpperCase","stat","toFixed","HistogramView","renderHistogram","nextProps","nextState","dataNumeric","Number","nticks","correctList","dataWithCorrect","scale","scaleLinear","domain","min","range","histogram","thresholds","ticks","bins","binSizes","bin","correctBin","load","types","grid","lines","text","position","axis","NumberFormats","percent","s","dollar","NumericDisplay","selectedGroupVal","averages","calcAverages","statBubbles","average","createClickHandler","sortedData","acc","All","sum","count","groupId","questionId","row","k","TreatmentChartView","DummyChartView","displayElts","overflow","TreatmentDisplay","columnWidth","questions","chartViews","treatments","descriptions","bottom","push","ImageView","src","process","img_url","KeynessDisplay","WordcloudDisplay","UmbrellaDisplay","subquestions","Error","bubbles","FrequencyChartView","console","log","counts","FrequencyDisplay","selectedSurvey","toLowerCase","DataDisplay","specificDisplay","addSurveyType","survey_id","incomeSurveyData","tradeSurveyData","estateSurveyData","healthSurveyData","dataCache","noGroupTypes","DataPage","selectedTopic","handleGroupSelect","handleTopicSelect","handleQuestionSelect","additionalGroups","topics","displayGroupSelect","surveyData","includes","csv","then","event","DemoImage","Section","children","Subsection","HomePage","AboutPage","App","surveyRoutes","path","component","basename","ReactDOM","render"],"mappings":"mguonBAKqBA,E,YACjB,aAAe,uE,sEAIX,IAAIC,EAAcC,OAAOC,KAAKC,KAASC,KAAI,SAAAC,GACvC,IAAIC,EAASH,IAAQE,GACrB,OACI,wBAAIE,UAAY,YACZ,kBAAC,IAAD,CAASA,UAAU,WAAWC,gBAAgB,SAASC,GAAE,kBAAaJ,IACjEC,EAAOI,WAKxB,OACI,yBAAKC,MAAM,kDAEP,4BAAQA,MAAM,iBAAiBC,KAAK,SAASC,cAAY,WAAWC,cAAY,iBAAiBC,gBAAc,gBAAgBC,gBAAc,QAAQC,aAAW,qBAC5J,0BAAMN,MAAM,yBAGhB,yBAAKA,MAAM,2BAA2BO,GAAG,iBACrC,wBAAIP,MAAM,sBACV,wBAAIJ,UAAY,YACZ,kBAAC,IAAD,CAASY,OAAK,EAACZ,UAAU,WAAWC,gBAAgB,SAASC,GAAG,KAAhE,SAIJ,wBAAIF,UAAY,YACZ,kBAAC,IAAD,CAASY,OAAK,EAACZ,UAAU,WAAWC,gBAAgB,SAASC,GAAG,UAAhE,UAIHT,O,kDAlCsBoB,IAAMC,W,eCH5BC,G,uLAEb,IAAIC,EAAY,CACZC,UAAYC,KAAKC,MAAMF,UACvBG,UAAYF,KAAKC,MAAMC,UACvBC,OAASH,KAAKC,MAAME,OACpBC,aAAc,QAElB,OACI,6BACI,yBAAKtB,UAAY,OACb,gCAASkB,KAAKC,MAAMhB,QAExB,0BAAMH,UAAY,gBAAgBuB,wBAAyB,CAACC,OAASN,KAAKC,MAAMM,SAAUC,MAASV,EAAWW,IAAOT,KAAKU,kB,GAb9Ff,IAAMgB,gBCI7BC,E,YACjB,aAAe,IAAD,8BACV,+CACKC,WAAalB,IAAMmB,YACxB,EAAKJ,WAAaf,IAAMmB,YACxB,EAAKC,QAAUpB,IAAMmB,YAJX,E,sEAQV,IAAId,KAAKC,MAAMe,QACX,OAAO,KAEX,IAmCWC,EAnCPC,GAmCOD,EAnCsBjB,KAAKC,MAAMe,QAoCzCxC,OAAOC,KAAKwC,GAAMtC,KAAI,SAAAwC,GAAG,OAAIF,EAAKE,OApCgBxC,KAAI,SAACyC,GACtD,OAAO,4BAAQC,MAASD,EAAO3B,IAAK2B,EAAOnC,UAE3CqC,EAAgBtB,KAAKC,MAAMsB,SAAWvB,KAAKC,MAAMe,QAAQhB,KAAKC,MAAMsB,UAAUtC,MAAQ,GACtFuC,EAAsBxB,KAAKC,MAAMsB,SAAWvB,KAAKC,MAAMe,QAAQhB,KAAKC,MAAMsB,UAAUE,YAAc,GACtG,OACI,yBAAK3C,UAAY,eACb,yBAAKA,UAAY,OACb,4BAAKkB,KAAKC,MAAMhB,QAEpB,yBAAKH,UAAY,OACb,8BAAOkB,KAAKC,MAAMwB,cAEtB,yBAAK3C,UAAY,cAAc2B,IAAOT,KAAKa,YACvC,4BAAQ/B,UAAY,aAAa4C,KAAQ,EAAGjB,IAAOT,KAAKe,QAASM,MAASrB,KAAKC,MAAMsB,SAAUI,SAAU3B,KAAKC,MAAM2B,cAC/GV,IAGT,kBAAC,EAAD,CACIjC,MAASqC,EACTf,QAAWiB,EACXtB,UAAY,QACZH,UAAY,Y,2CAOrBC,KAAKe,QAAQc,UAAY7B,KAAKC,MAAMsB,WACnCvB,KAAKe,QAAQc,QAAQC,cAAgB,U,GA1CRnC,IAAMC,W,ICJ1BmC,E,iLAEb,OACI,6BACI,8CADJ,IAC4B,6BACxB,8E,GALsBpC,IAAMC,WCU7BoC,G,MAXf,CACIC,YAAe,cACfC,UAAY,YACZC,QAAU,UACVC,UAAY,YACZC,YAAc,cACdC,QAAU,UACVC,UAAY,YACZC,SAAW,aCPMC,E,iLAEb,OAAIzC,KAAKC,MAAMyC,iBAIX,yBAAK5D,UAAU,uBAAuB0B,MAAO,CAACmC,MAAO,OAAQC,WAAa,QACtE,yBAAKnD,GAAMO,KAAKC,MAAM4C,UAAWrC,MAAO,CAACmC,MAAM,WAJ5C,O,0CASX3C,KAAK8C,uB,2CAIL,IAAIC,EAAgB/C,KAAKC,MAAM8C,cAC3BL,EAAmB1C,KAAKC,MAAMyC,iBAC9BM,EAAiBhD,KAAKC,MAAM+C,eAChC,GAAIN,GAAoB1C,KAAKC,MAAMgD,KAAM,CACrC,IAAIA,EAAOjD,KAAKC,MAAMgD,KAAKC,QAAO,SAAAC,GAAC,QAAMJ,GAAiBI,EAAEJ,EAActD,MAAQ0D,EAAET,EAAiBjD,MAAO,KAC5GuD,EAAehD,KAAKC,MAAM4C,UAAWE,EAAeL,EAAkBO,Q,GArB5CtD,IAAMC,WCM7BwD,G,MARA,CACXC,UAAY,CAAC,WACbC,YAAc,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WACtEC,UAAY,CAAC,UAAW,UAAW,WACnCC,UAAY,CAAC,UAAW,UAAW,UAAW,WAC9CC,UAAY,CAAC,UAAW,UAAW,UAAW,UAAW,aCqH9CC,EAxHD,CACVC,kBAAmB,SAASV,EAAM9B,EAAKyC,GAGnC,OAFWX,EAAKtE,KAAI,SAAAwE,GAAC,OAAIA,EAAEhC,MACL+B,QAAO,SAACW,EAAGC,EAAGC,GAAP,OAAaA,EAAEC,QAAQH,KAAOC,KACzCZ,QAAO,SAAAC,GAAC,OAAIA,GAAKA,EAAEc,OAAOC,OAAS,KAAGC,KAAKP,IAmDjEQ,UAAY,SAASnB,EAAMoB,GACvB,IAAIC,EAAetE,KAAK2D,kBAAkBV,EAAMoB,OAAaE,GACzDC,EAAevB,EAAKC,QAAO,SAAAC,GAAC,YAAsBoB,GAAlBpB,EAAEkB,MAClCI,EAAa,GAHmB,uBAIpC,IAAI,IAAJ,IAAeH,EAAf,+CAA6B,CAAC,IAAtBI,EAAqB,QACzBD,EAAWC,GAAO,GALc,kFAOpCF,EAAaG,SAAQ,SAAAxB,GAAC,OAAIsB,EAAWtB,EAAEkB,SACvC,IAAIO,EAAY,GARoB,uBASpC,IAAI,IAAJ,IAAeN,EAAf,+CAA4B,CAAC,IAArBI,EAAoB,QACxBE,EAAUF,GAAOD,EAAWC,IAVI,kFAYpC,OAAOE,GAEXC,eAAiB,SAAS5B,EAAM6B,EAAUC,EAAUV,GAC/C,IAAIC,EAAetE,KAAK2D,kBAAkBV,EAAMoB,OAAaE,GACzDC,EAAevB,EAAKC,QAAO,SAAAC,GAAC,OAAKA,EAAE2B,IAAaC,GAAwB,OAAZA,SAAwCR,GAAlBpB,EAAEkB,MACpFI,EAAa,GAH2C,uBAI5D,IAAI,IAAJ,IAAeH,EAAf,+CAA6B,CAAC,IAAtBI,EAAqB,QACzBD,EAAWC,GAAO,GALsC,kFAQ5D,IAAIM,EAAQR,EAAaN,OACzBM,EAAaG,SAAQ,SAAAxB,GAAC,OAAIsB,EAAWtB,EAAEkB,SACvC,IAAIO,EAAY,GAV4C,uBAW5D,IAAI,IAAJ,IAAeN,EAAf,+CAA4B,CAAC,IAArBI,EAAoB,QACxBE,EAAUF,GAAOD,EAAWC,GAAOM,GAZqB,kFAc5D,OAAOJ,GAGZK,kBAAmB,SAASC,GACxB,OAAGA,EAAStB,OACDuB,EAAEC,eAAeC,OAAOH,EAAStB,QAGjC,SAACG,EAAGuB,GAAJ,OAAUvB,EAAEwB,cAAcD,KAIzCE,eAAgB,SAASC,GACrB,OAAGA,EAAM7B,OACE,SAACG,EAAGuB,GACP,MAAS,OAALvB,GAAoB,EACf,OAALuB,EAAmB,EACXH,EAAEC,eAAeC,OAAOI,EAAM7B,OAA9BuB,CAAsCpB,EAAGuB,IAIlD,SAACvB,EAAGuB,GACP,MAAS,OAALvB,GAAoB,EACf,OAALuB,EAAmB,EACXvB,EAAEwB,cAAcD,KAKxCI,gBAAiB,SAASR,GACtB,IAAIS,EAAeT,EAASU,QAAgBV,EAASU,MAAhB,IAClCV,EAASU,SAASxC,EAASA,EAAO8B,EAASU,OAASV,EAASU,MAChE,OAAGD,GACSvC,EAAOE,cChHNuC,E,iLAEb,OAAO,kBAAC,EAAD,CACKhD,UAAY,WACZhE,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAKC,MAAMgD,KACpBF,cAAkB/C,KAAKC,MAAM8C,cAC7BL,iBAAqB1C,KAAKC,MAAMyC,iBAChCM,eAAmBhD,KAAK8F,oB,sCAIxBjD,EAAWE,EAAeL,EAAkBO,GACxD,IAAI8C,EAAY9C,EAAKtE,KAAI,SAACwE,GAAQ,MAAO,CAACsC,MAAQtC,EAAEJ,EAActD,KAAO,eAAgBuG,SAAW7C,EAAET,EAAiBjD,KAAO,mBAG1HwG,EAAU,CACVR,MAHc/B,EAAM8B,eAAezC,GAInCiD,SAHiBtC,EAAMuB,kBAAkBvC,IAK7CyC,EAAE,IAAD,OAAKtC,IAAaqD,MAAMH,EACrB,CACII,KAAO,CAAC,SACRC,KAAM,CAAC,YACPC,WAAYlB,EAAEC,eAAekB,YAAjB,QACZL,QAAUA,Q,GAzBgBtG,IAAMC,W,yCCE3B2G,E,iLAEb,OAAO,kBAAC,EAAD,CACK1D,UAAa7C,KAAKC,MAAM4C,WAAa,QACrChE,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAKC,MAAMgD,KACpBF,cAAkB/C,KAAKC,MAAM8C,cAC7BL,iBAAqB1C,KAAKC,MAAMyC,iBAChCM,eAAmBhD,KAAKwG,YAAYC,KAAKzG,U,kCAI7C6C,EAAWE,EAAeL,EAAkBO,GAAO,IAAD,EACtD8C,EAAY9C,EAAKtE,KAAI,SAAAwE,GAAM,IAAD,EAC1B,OAAO,EAAP,iBACKJ,EAActD,GAAK0D,EAAEJ,EAActD,KAAO,gBAD/C,cAEKiD,EAAiBjD,GAAK0D,EAAET,EAAiBjD,KAAO,gBAFrD,KAKAiH,EAAchD,EAAM8B,eAAezC,GACnC4D,EAAiBjD,EAAMuB,kBAAkBvC,GACzCiD,EAAejC,EAAMgC,gBAAgBhD,GACrCkE,EAAY,CAAC,OAAOC,OAAOnD,EAAMC,kBAAkBoC,EAAWhD,EAActD,GAAIiH,IAChFpC,EAAeZ,EAAMC,kBAAkBoC,EAAWrD,EAAiBjD,GAAIkH,GACvEG,EAAc,GAZwC,uBAa1D,IAAI,IAAJ,IAAoBF,EAApB,+CAA+B,CAAC,IAAxB7B,EAAuB,QAC3B+B,EAAY/B,GAAYrB,EAAMmB,eAAekB,EAAWhD,EAActD,GAClEsF,EAAUrC,EAAiBjD,GAAIkH,IAfmB,kFAiB1D,IAAII,EAAYzC,EAAa3F,KAAI,SAAAqI,GAC7B,MAAM,CAAEA,GAAR,mBAAyBJ,EAAUjI,KAAI,SAAAwE,GAAC,OAAI2D,EAAY3D,GAAG6D,WAI3DC,EAAQC,GAAGC,SAASC,IAAMC,IAAI,KAC9BC,OAAO,IAAD,OAAMzE,GACZI,KAAO,CACHsE,QAASR,EACTS,OAAS,CAAClD,GACVnF,KAAO,MACPsI,MAAO,MAEX/F,KAAO,CACHiB,MAAOwC,EAAE,IAAD,OAAKtC,IAAa6E,SAAS/E,SAEvCiD,MAAQ,CACJ+B,QAAUhC,GAAgBvC,EAAOE,aAErCsE,OAAS,CACLC,KAAO,CACHC,QAAU,cAEdC,MAAM,GAEVC,QAAU,CACNC,KAAO,KAEXC,QAAS,CACLC,SAAU,GAEdC,IAAM,CACFzF,MAAM,CACF0F,MAAO,OA5Be,qBAgCvB,CACHlI,OAlCS,GAkCDyG,EAAU1C,SAjCQ,qBAmCvB,CACHoE,SAAU,EACVnF,EAAI,CACAhE,KAAM,WACNoJ,WAAY3B,GAEhB4B,EAAI,CAEAC,IAAM,IACNC,MAAO,aACPC,KAAO,CACHC,OAAQC,GAAGD,OAAO,WA9CA,GAkD/B5I,KAAKC,MAAM6I,YAAc,MAxE8B,uBAyE1D,IAAI,IAAJ,IAAeC,SAASC,uBAAuB,mBAA/C,+CAAmE,SAC3DC,UAAY,cA1EsC,kFA8E1D,QAA+B1E,GAA5B7B,EAAiBwG,QAEhB,IADA,IAAIC,EAAOJ,SAASC,uBAAT,oBAA6CtG,EAAiBwG,QAAQE,QAAQ,IAAK,OACtFtF,EAAI,EAAGA,EAAIqF,EAAKjF,OAAQJ,IAC5BqF,EAAKrF,GAAGtD,MAAM6I,YAAY,UAAW,MAAO,cAMpD,IAAIC,EAAaP,SAASQ,eAAe,cACrCD,IACAA,EAAW9I,MAAML,OAAS4I,SAASC,uBAAuB,iBAAiB,GAAG7I,OAAOqJ,QAAQnI,MAAQ,MAEtGrB,KAAKC,MAAMwJ,cACVzJ,KAAKC,MAAMwJ,aAAaxC,O,GAxGUtH,IAAMgB,eCJ/B+I,E,iLACP,IAAD,OACL,IAAK1J,KAAKC,MAAMiF,WAAalF,KAAKC,MAAMgD,KACpC,OAAO,KAEX,IAAI0C,EAAejC,EAAMgC,gBAAgB1F,KAAKC,MAAMiF,UAChDyE,EAAYjG,EAAMC,kBAAkB3D,KAAKC,MAAMgD,KAAMjD,KAAKC,MAAMiF,SAASzF,GACzDiE,EAAMuB,kBAAkBjF,KAAKC,MAAMiF,WACnD0E,EAAcD,EAAUhL,KAAI,SAAC+F,EAAKZ,GAAN,OAChC,yBAAKhF,UAAY,uCACb+K,YAAa,WACT,GAAG,EAAK5J,MAAM6J,OAAO,CAAC,IAAD,uBACjB,IAAI,IAAJ,IAAiB,EAAK7J,MAAM6J,OAA5B,+CAAoC,SAC1BC,MAAMrF,IAFC,qFAMzBsF,aAAc,WACV,GAAG,EAAK/J,MAAM6J,OAAO,CAAC,IAAD,uBACjB,IAAI,IAAJ,IAAiB,EAAK7J,MAAM6J,OAA5B,+CAAoC,SAC1BG,UAFO,qFAMzBzJ,MAAS,CACLoF,MAAQ,QACRsE,gBAAiBvE,EAAa7B,EAAI6B,EAAazB,QAC/CiG,OAAQ,MACRC,SAAW,OACXrK,UAAW,OACXsK,SAAU,MACVrC,QAAS,MACTpF,WAAiB,GAALkB,EAAS,OAAS,MAC9BwG,YAAaxG,GAAK6F,EAAUzF,OAAS,EAAI,OAAS,MAClDqG,UAAW,OACXC,QAAU9F,GAAO,EAAKzE,MAAMiF,SAASgE,QAAU,EAAM,KAEzD,gCAASxE,OAEb,OAAO,yBAAK5F,UAAY,aAAa0B,MAAO,CAACoC,WAAY,OAAQ0H,YAAa,OAAQ3H,MAAM,SACvFiH,O,GAxC4BjK,IAAMgB,eCF1B8J,E,iLAEb,IAAKzK,KAAKC,MAAMiF,WAAalF,KAAKC,MAAMiF,SAASgE,QAC7C,OAAO,KAEX,IAAIwB,EAAa1K,KAAKC,MAAMyK,WAAc,SAAAvH,GAAC,OAAIA,GAC3CwH,EAAa,KASjB,OARG3K,KAAKC,MAAMiF,SAAS0F,SAEfD,EADA3K,KAAKC,MAAMiF,SAAS2F,WACP,8CAAmB,uBAAGC,KAAQ9K,KAAKC,MAAMiF,SAAS2F,WAAYE,OAAS,UAAU/K,KAAKC,MAAMiF,SAAS0F,QAArG,KAGA,8CAAoB5K,KAAKC,MAAMiF,SAAS0F,OAAxC,MAGd,yBAAK9L,UAAY,UACpB,4BAAQ0B,MAAO,CAACoF,MAAM,QAASwE,SAAS,SAAxC,mBAAkEM,EAAU1K,KAAKC,MAAMiF,SAASgE,UAChG,wBAAI1I,MAAO,CAAC4J,SAAS,MAAOxH,WAAY,MAAOoI,cAAe,QACzDL,GAA0B,W,GAlBChL,IAAMgB,eCK7BsK,G,kBACjB,WAAYhL,GAAQ,IAAD,8BACf,4CAAMA,KACDiL,MAAQ,CACTC,WAAY,GAEhB,EAAK1B,aAAe,EAAKA,aAAahD,KAAlB,gBALL,E,sEAQf,OAAIzG,KAAKC,MAAMiF,UAAalF,KAAKC,MAAMwF,MAInC,yBAAK3G,UAAY,sBACb,yBAAKA,UAAY,cACb,0DAA+B,6BAAK,gCAASkB,KAAKC,MAAMiF,SAASzD,aAAezB,KAAKC,MAAMiF,SAASjG,OAApG,IAAoH,6BAApH,IAA0H,6BAA1H,MACG,gCAASe,KAAKC,MAAMwF,MAAMxG,SAEjC,yBAAKH,UAAY,OACb,kBAAC,EAAD,CAAgBoG,SAAYlF,KAAKC,MAAMiF,YAE3C,yBAAKpG,UAAY,MAAM0B,MAAS,CAAC4K,YAAY,SACzC,kBAAC,EAAD,CACInI,KAASjD,KAAKC,MAAMgD,KACpBiC,SAAalF,KAAKC,MAAMiF,SACxB4E,OAAW,CAAC9J,KAAKkL,MAAMjE,UAG/B,yBAAKnI,UAAY,OACb,kBAAC,EAAD,CACID,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAKC,MAAMgD,KACpBF,cAAkB/C,KAAKC,MAAMwF,MAC7B/C,iBAAqB1C,KAAKC,MAAMiF,SAChCuE,aAAiBzJ,KAAKyJ,gBAI9B,yBAAK3K,UAAY,mBACb,4BAAQuM,QAAWrL,KAAKsL,YAAY7E,KAAKzG,MAAOlB,UAAY,qBACvDkB,KAAKkL,MAAMC,UAAY,OAAS,OADrC,+BAIJ,yBAAKrM,UAAY,MAAM0B,MAAS,CAACT,UAAW,OAAQwL,aAAc,SAC5DvL,KAAKkL,MAAMC,UACT,kBAAC,EAAD,CACItM,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAKC,MAAMgD,KACpBF,cAAkB/C,KAAKC,MAAMwF,MAC7B/C,iBAAqB1C,KAAKC,MAAMiF,WAC/B,OAxCV,O,mCA+CF+B,GACTjH,KAAKwL,SAAS,CACVvE,MAAQA,M,oCAKZjH,KAAKwL,SAAU,CACXL,WAAanL,KAAKkL,MAAMC,c,gCAItBlI,GACN,OAAOA,M,GAtEiCtD,IAAMC,YCJjC6L,G,uLACP,IAAD,OACLjL,EAA4B,OAApBR,KAAKC,MAAMhB,MAAiB,CAAEyM,eAAiB,aAAgB,GACvEC,EAAa,sCAAwC3L,KAAKC,MAAM2L,OAAS,eAAiB,IAC1F,OACI,uBAAGd,KAAK,IAAIhM,UAAa6M,EAAYN,QAAY,SAACQ,GAAOA,EAAEC,iBAAkB,EAAK7L,MAAM8L,gBACpF,4BAAQjN,UAAY,cAAc0B,MAASA,GAA4B,OAApBR,KAAKC,MAAMhB,MAAiBe,KAAKC,MAAMhB,MAAM+M,cAAgBhM,KAAKC,MAAMhB,OAEvHe,KAAKC,MAAMgM,KACVjM,KAAKC,MAAMyK,UAAY1K,KAAKC,MAAMyK,UAAU1K,KAAKC,MAAMgM,KAAKC,QAAQ,IAAMlM,KAAKC,MAAMgM,KAAKC,QAAQ,GACnG,U,GAVoBvM,IAAMgB,gBCGzBwL,G,wBACjB,aAAe,IAAD,8BACV,+CACKC,gBAAkB,EAAKA,gBAAgB3F,KAArB,gBAFb,E,sEAKV,OACA,yBAAKjG,MAAO,CAACmC,MAAO,SAChB,wBAAI7D,UAAY,eAAhB,uCACwC,gCAASkB,KAAKC,MAAM8E,WAE5D,kBAAC,EAAD,CACIlC,UAAY,YACZhE,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAKC,MAAMgD,KACpBF,cAAkB/C,KAAKC,MAAM8C,cAC7BL,iBAAqB1C,KAAKC,MAAMyC,iBAChCM,eAAmBhD,KAAKoM,qB,4CAMdC,EAAWC,GAI7B,OAHGD,EAAUtJ,eAAiB/C,KAAKC,MAAM8C,eAAiBsJ,EAAU3J,kBAAoB1C,KAAKC,MAAMyC,mBAC/F1C,KAAKiH,MAAQ,OAEV,I,sCAGKpE,EAAWE,EAAeL,EAAkBO,GAAO,IAAD,OAC1DsJ,EAActJ,EAAKtE,KAAI,SAAAwE,GAAC,OAAIqJ,OAAOrJ,EAAET,EAAiBjD,QACtDsG,EAAY9C,EAAKC,QAAO,SAAAC,GAAC,MAA4B,QAAxB,EAAKlD,MAAM8E,UAAsB5B,EAAEJ,EAActD,KAAO,EAAKQ,MAAM8E,YAC/EpG,KAAI,SAAAwE,GAAC,OAAIqJ,OAAOrJ,EAAET,EAAiBjD,QAEpDgN,EAAS/J,EAAiB+J,OAAS/J,EAAiB+J,OAAS,GAC7DC,EAAchK,EAAiBwG,QAAU,CAACxG,EAAiBwG,SAAW,GACtEyD,EAAkBJ,EAAY1F,OAAO6F,GACrCE,EAAQ/D,GAAGgE,cACEC,OAAO,CAACjE,GAAGkE,IAAIJ,GAAkB9D,GAAGJ,IAAIkE,KACxCK,MAAM,CAACnE,GAAGkE,IAAIJ,GAAkB9D,GAAGJ,IAAIkE,KAEpDM,EAAYpE,GAAGoE,YACEH,OAAO,CAACjE,GAAGkE,IAAIJ,GAAkB9D,GAAGJ,IAAIkE,KACxCO,WAAWN,EAAMO,MAAMV,IAExCW,EAAOH,EAAUlH,GACjBsH,EAAWD,EAAKzO,KAAI,SAAAwE,GAAC,OAAIA,EAAEe,UAC3BqE,EAAa6E,EAAKzO,KAAI,SAAA2O,GAAG,gBAAOA,EAAG,GAAV,YAAoBA,EAAG,OAChDC,EAAa7K,EAAiBwG,QAAU+D,EAAU,CAACvK,EAAiBwG,UAAUhG,QAAO,SAAAC,GAAC,OAAIA,EAAEe,OAAS,KAAG,GAAK,KAC7GlE,KAAKiH,MAsCLjH,KAAKiH,MAAMuG,KAAK,CACZjG,QAAU,CAAC,CAAC,SAAF,mBAAe8F,OAtC7BrN,KAAKiH,MAAQC,GAAGC,SAAS,CACrBG,OAAO,IAAD,OAAMzE,GACZI,KAAO,CACHsE,QAAU,CAAC,CAAC,SAAF,mBAAe8F,KACzBI,MAAQ,CACJ,MAAU,QAGlBC,KAAO,CACHvK,EAAG,CACCwK,MAASJ,EACD,CAAC,CACGlM,MAAK,UAAMkM,EAAU,GAAhB,YAA0BA,EAAU,IACzCK,KAAI,mBAAe5N,KAAKC,MAAMyK,UAAUhI,EAAiBwG,UACzDhK,MAAO,eACP2O,SAAU,WAEV,KAGpBjI,MAAQ,CACJ+B,QAAUvE,EAAOC,WAErByK,KAAO,CACH3K,EAAI,CACAhE,KAAO,WACPoJ,WAAaA,IAGrBH,IAAK,CACDzF,MAAO,CACH0F,MAAO,U,GAlFY1I,IAAMC,YCDlCmO,EALO,CAClBC,QAAU,SAAAC,GAAC,gBAAOA,EAAP,MACXC,OAAS,SAAAD,GAAC,iBAAQA,KCMDE,E,YACjB,aAAe,IAAD,8BACV,+CACKjD,MAAQ,CACTkD,iBAAmB,OAHb,E,sEAMJ,IAAD,OACL,IAAIpO,KAAKC,MAAMiF,WAAalF,KAAKC,MAAMwF,MACnC,OAAO,KAEX,IAAIxC,EAAOjD,KAAK+F,UAAU/F,KAAKC,MAAMgD,MACjCoL,EAAWrO,KAAKsO,aAAarL,GAAMkB,MAAK,SAACJ,EAAGuB,GAAJ,OAAU5B,EAAM8B,eAAe,EAAKvF,MAAMwF,MAAhC/B,CAAuCK,EAAEgB,SAAUO,EAAEP,aACvG2F,EAAYqD,EAAc/N,KAAKC,MAAMiF,SAAS0D,SAAY,SAAAzF,GAAC,OAAIA,GAC/DoL,EAAcF,EAAS1P,KAAI,SAAAwE,GAAC,OAC5B,yBAAKrE,UAAY,WAAW0B,MAAO,CAAC+K,aAAe,SAC/C,kBAAC,EAAD,CACItM,MAAUkE,EAAE4B,SACZkH,KAAS9I,EAAEqL,QACX5C,OAAWzI,EAAE4B,UAAY,EAAKmG,MAAMkD,iBACpCrC,YAAgB,EAAK0C,mBAAmBtL,EAAE4B,UAC1C2F,UAAcA,QAI1B,OACI,yBAAK5L,UAAY,kBACb,yBAAKA,UAAY,cACb,oDAAyB,gCAASkB,KAAKC,MAAMiF,SAASzD,aAAtD,KAA6E,6BAAK,6BAAlF,MACG,gCAASzB,KAAKC,MAAMwF,MAAMxG,SAEjC,yBAAKH,UAAY,OACb,kBAAC,EAAD,CAAgBoG,SAAWlF,KAAKC,MAAMiF,SAAUwF,UAAaA,KAEjE,yBAAK5L,UAAY,OACXyP,GAEN,yBAAKzP,UAAY,OACb,kBAAC,EAAD,CACID,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAK+F,UAAU/F,KAAKC,MAAMgD,MACnCF,cAAkB/C,KAAKC,MAAMwF,MAC7B/C,iBAAqB1C,KAAKC,MAAMiF,SAChCH,SAAa/E,KAAKkL,MAAMkD,iBACxB1D,UAAaA,Q,gDAOP2B,GACtBrM,KAAKwL,SAAS,CACV4C,iBAAmB,U,gCAIjBnL,GAAO,IAAD,OACRuB,EAAevB,EAAKC,QAAO,SAAAC,GAAC,OAAIA,EAAE,EAAKlD,MAAMwF,MAAMhG,KAAO0D,EAAE,EAAKlD,MAAMiF,SAASzF,OAChFiP,EAAalK,EAAaL,MAAK,SAACJ,EAAGuB,GAAJ,OAAUvB,EAAE,EAAK9D,MAAMiF,SAASzF,IAAM6F,EAAE,EAAKrF,MAAMiF,SAASzF,OAC/F,OAAO+E,EAAatB,QAAO,SAAAC,GAAC,OAAIuL,EAAW1K,QAAQb,IAAM,IAAOuL,EAAWxK,Y,yCAG5Da,GACf,OAAO,WACH/E,KAAKwL,SAAS,CACV4C,iBAAmBrJ,KAEzB0B,KAAKzG,Q,mCAGEiD,GACT,IAAI0L,EAAM,CACNC,IAAM,CACFC,IAAM,EACNC,MAAQ,IAGZC,EAAU/O,KAAKC,MAAMwF,MAAMhG,GAC3BuP,EAAahP,KAAKC,MAAMiF,SAASzF,GARtB,uBASf,IAAI,IAAJ,IAAewD,EAAf,+CAAqB,CAAC,IAAdgM,EAAa,QACblK,EAAWkK,EAAIF,GACdhK,KAAY4J,IACbA,EAAI5J,GAAY,CAAC8J,IAAM,EAAGC,MAAQ,IAEtCH,EAAIC,IAAIC,KAAOrC,OAAOyC,EAAID,IAC1BL,EAAIC,IAAIE,QACRH,EAAI5J,GAAU8J,KAAOrC,OAAOyC,EAAID,IAChCL,EAAI5J,GAAU+J,SAjBH,kFAoBf,OAAOtQ,OAAOC,KAAKkQ,GAAKhQ,KAAI,SAAAuQ,GACxB,MAAO,CAACnK,SAAWmK,EAAGV,QAAUG,EAAIO,GAAGJ,MAAQ,EAAIH,EAAIO,GAAGL,IAAMF,EAAIO,GAAGJ,MAAQ,U,GA5F/CnP,IAAMC,WCL7BuP,E,iLAiBb,OAAO,kBAAC,EAAD,CACHtQ,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAKC,MAAMgD,KACpBF,cAAkB/C,KAAKC,MAAM8C,cAC7BL,iBAAqB1C,KAAKC,MAAMyC,iBAChCG,UAAc7C,KAAKC,MAAM4C,UACzBiG,WArBc,CACdgF,KAAO,CACHxF,SAAU,EACVnF,EAAI,CACA4E,MAAO,GAEXS,EAAI,CACAT,MAAO,IAGfC,QAAU,CACNC,KAAM,IAWVwB,aAAiBzJ,KAAKC,MAAMwJ,mB,GAxBQ9J,IAAMgB,eCCjCyO,E,iLAEb,IAiBIxL,EAAS,KAETA,EADD5D,KAAKC,MAAM8C,cAAca,OACfuB,EAAEC,eAAeC,OAAOrF,KAAKC,MAAM8C,cAAca,QAGjD,SAACG,EAAGuB,GAAJ,OAAUvB,EAAEwB,cAAcD,IAGvC,IAAI+J,EAAc,CAAC,OAAD,mBAAW3L,EAAMC,kBAAkB3D,KAAKC,MAAMgD,KAAMjD,KAAKC,MAAM8C,cAActD,GAAImE,KAC9EjF,KAAI,SAAAwE,GAAC,OAAI,wBAAI3C,MAAO,CAAC8O,SAAU,WAAW,4BAAI,gCAASnM,QAE5E,OAAO,2BAAO1D,GAAK,aAAae,MAAO,CAAC+J,UAAW,OAC/C,2BAAO/J,MAAO,CAAC4J,SAAW,SACrBiF,M,0CAeTrP,KAAK8C,uB,mDA/C+BnD,IAAMC,WCG7B2P,E,YACjB,WAAYtP,GAAQ,IAAD,8BACf,4CAAMA,KACDiL,MAAQ,CACTpB,OAAS,IAEb,EAAKA,OAAS,GACd,EAAKL,aAAe,EAAKA,aAAahD,KAAlB,gBANL,E,sEAST,IAAD,OACL,IAAIzG,KAAKC,MAAMiF,WAAalF,KAAKC,MAAMwF,MAEnC,OADAzF,KAAK8J,OAAS,GACP,KAKX,IAAI0F,EAAW,iBAAa,GAAK,EAAIxP,KAAKC,MAAMiF,SAASuK,UAAUvL,QAC/DwL,EAAa1P,KAAKC,MAAMiF,SAASuK,UAAU9Q,KAAI,SAAAuG,GAAQ,OACvD,yBAAKpG,UAAa0Q,EAAahP,MAAS,CAAC4K,YAAa,QAClD,kBAAC,EAAD,CACIvM,OAAW,EAAKoB,MAAMpB,OACtBoE,KAAS,EAAKhD,MAAMgD,KAAKC,QAAO,SAAAC,GAAC,OAAI+B,EAASyK,WAAW3L,QAAQb,EAAC,mBAAyB,KAC3FJ,cAAkB,EAAK9C,MAAMwF,MAC7B/C,iBAAgB,aAAMkD,MAAO,EAAK3F,MAAMiF,SAASU,MAAOhC,OAAQ,EAAK3D,MAAMiF,SAAStB,QAAWsB,GAC/FrC,UAAS,UAAOqC,EAASjG,MAAhB,UACTwK,aAAgB,EAAKA,mBAO7BmG,GAFelM,EAAMgC,gBAAgB1F,KAAKC,MAAMiF,UAEjClF,KAAKC,MAAMiF,SAASuK,UAAU9Q,KAAI,SAAAuG,GAAQ,OACzD,yBAAKpG,UAAa0Q,GACd,kBAAC,EAAD,CACIvQ,MAASiG,EAASjG,MAClBsB,QAAW2E,EAASzD,YACpBvB,UAAa,eAIzB,OACI,yBAAKpB,UAAY,oBACb,yBAAKA,UAAY,OACb,6CACkB,6BACd,gCAASkB,KAAKC,MAAMiF,SAASjG,OAFjC,IAEiD,6BAAK,6BAFtD,cAIe,gCAASe,KAAKC,MAAMwF,MAAMxG,SAI7C,yBAAKH,UAAY,OACb,yBAAKA,UAAY,YACb,4BAAQ0B,MAAS,CAACqN,SAAU,WAAYgC,OAAQ,IAAKjN,WAAY,UAAW5C,KAAKC,MAAMwF,MAAMxG,QAEjG,yBAAKH,UAAY,YACb,yBAAKA,UAAY,OACZ8Q,KAIb,yBAAK9Q,UAAY,OACb,yBAAKA,UAAY,aACjB,yBAAKA,UAAY,WAAW0B,MAAO,CAAC4K,YAAa,QAC7C,kBAAC,EAAD,CACInI,KAASjD,KAAKC,MAAMgD,KACpBiC,SAAalF,KAAKC,MAAMiF,SACxB4E,OAAW9J,KAAKkL,MAAMpB,WAIlC,yBAAKhL,UAAY,OACb,yBAAKA,UAAY,YACb,kBAAC,EAAD,CACID,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAKC,MAAMgD,KACpBF,cAAkB/C,KAAKC,MAAMwF,MAC7B/C,iBAAqB1C,KAAKC,MAAMiF,SAChCrC,UAAS,iBAGjB,yBAAK/D,UAAY,YACb,yBAAKA,UAAY,OACZ4Q,Q,mCAQZzI,GACTjH,KAAK8J,OAAOgG,KAAK7I,GACdjH,KAAK8J,OAAO5F,QAAUlE,KAAKC,MAAMiF,SAASuK,UAAUvL,QACnDlE,KAAKwL,SAAS,CACV1B,OAAS9J,KAAK8J,a,GAlGgBnK,IAAMC,WCL/BmQ,E,iLAEb,OAAO,yBAAKjR,UAAY,yBACpB,yBAAKkR,IAAG,UAAKC,GAAL,mBAAsCjQ,KAAKC,MAAMiF,SAASgL,SAC9D1P,MAAS,CACL6J,SAAU,MACVlK,OAAQ,e,GANWR,IAAMgB,eCCxBwP,E,iLAEb,OAAO,yBAAKrR,UAAY,kBACpB,yBAAKA,UAAY,eACb,4BAAKkB,KAAKC,MAAMiF,SAASzD,cAG7B,yBAAK3C,UAAY,OACb,kBAAC,EAAD,CACIoG,SAAYlF,KAAKC,MAAMiF,iB,GATCvF,IAAMgB,eCA7ByP,E,iLAEb,OACA,yBAAKtR,UAAY,qBACb,yBAAKA,UAAY,eACb,4BAAKkB,KAAKC,MAAMiF,SAASzD,cAG7B,yBAAK3C,UAAY,OACb,kBAAC,EAAD,CACIoG,SAAYlF,KAAKC,MAAMiF,iB,GAVGvF,IAAMC,WCC/ByQ,E,YACjB,aAAc,IAAD,8BACT,+CACKnF,MAAQ,CACThG,cAAWX,GAHN,E,sEAMH,IAAD,OACL,IAAIvE,KAAKC,MAAMwF,MACX,OAAO,KAEX,IAAI6K,EAAetQ,KAAKC,MAAMiF,SAASuK,UACnC/M,EAAmB1C,KAAKkL,MAAMhG,UAAYoL,EAAa,GAC3D,QAAmB/L,GAAhB+L,EACC,MAAM,IAAIC,MAAM,wCAEpB,IAAIC,EAAUF,EAAa3R,KAAI,SAAAuG,GAAQ,OACnC,yBAAKpG,UAAY,WAAW0B,MAAO,CAAC+K,aAAe,SAC/C,kBAAC,EAAD,CACItM,MAAUiG,EAASjG,MACnB2M,OAAW1G,GAAYxC,EACvBqJ,YAAiB,kBAAM,EAAKA,YAAY7G,IAAWuB,KAAK,SAKpE,OACI,yBAAK3H,UAAY,mBACb,yBAAKA,UAAY,OACb,4BAAMkB,KAAKC,MAAMiF,SAASzD,cAE9B,yBAAK3C,UAAY,OACX0R,GAEN,kBAAC,EAAD,CACIvN,KAASjD,KAAKC,MAAMgD,KACpBF,cAAkB/C,KAAKC,MAAMwF,MAC7B/C,iBAAqBA,O,kCAMzBwC,GACRlF,KAAKwL,SAAS,CACVtG,SAAWA,Q,GA7CsBvF,IAAMC,WCI9B6Q,E,iLAEb,OAAO,kBAAC,EAAD,CACK5N,UAAa7C,KAAKC,MAAM4C,WAAa,QACrChE,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASjD,KAAKC,MAAMgD,KACpBP,iBAAqB1C,KAAKC,MAAMyC,iBAChCM,eAAmBhD,KAAKwG,YAAYC,KAAKzG,U,kCAI7C6C,EAAWE,EAAeL,EAAkBO,GAAO,IAAD,EAC1DyN,QAAQC,IAAI,aACZ,IAAI5K,EAAY9C,EAAKtE,KAAI,SAAAwE,GACrB,OAAO,eACFT,EAAiBjD,GAAK0D,EAAET,EAAiBjD,KAAO,mBAGrDkH,EAAiBjD,EAAMuB,kBAAkBvC,GACzCiD,EAAejC,EAAMgC,gBAAgBhD,GACrC4B,EAAeZ,EAAMC,kBAAkBoC,EAAWrD,EAAiBjD,GAAIkH,GACvEiK,EAASlN,EAAMU,UAAUnB,EAAMP,EAAiBjD,IAEpDiR,QAAQC,IAAIC,GAEA1J,GAAGC,SAASC,IAAMC,IAAI,KAC9BC,OAAO,IAAD,OAAMzE,GACZI,KAAO,CACHsE,QAAS,CAAC,CACL,SADI,mBACSjD,EAAa3F,KAAI,SAAAwE,GAAC,OAAIyN,EAAOzN,SAE/ChE,KAAO,OAEXuC,KAAO,CACHiB,MAAOwC,EAAE,IAAD,OAAKtC,IAAa6E,SAAS/E,SAEvCiD,MAAQ,CACJ+B,QAAUhC,GAAgBvC,EAAOE,aAErCsE,OAAS,CACLC,KAAO,CACHC,QAAU,cAEdC,MAAM,GAEVC,QAAU,CACNC,KAAO,KAEXC,QAAS,CACLC,SAAU,GAEdC,IAAM,CACFzF,MAAM,CACF0F,MAAO,MA5Be,qBA+BvB,CACHlI,OAjCS,GAiCDmE,EAAaJ,SAhCK,qBAkCvB,CACHoE,SAAU,EACVnF,EAAI,CACAhE,KAAM,WACNoJ,WAAYjE,KAtCU,GAyC/BtE,KAAKC,MAAM6I,YAAc,U,GAlEYnJ,IAAMgB,eCFjCkQ,E,YACjB,aAAe,IAAD,8BACV,+CACK3F,MAAQ,CACT4F,eAAiB,OAHX,E,sEAMJ,IAAD,OACL,IAAI9Q,KAAKC,MAAMiF,SACX,OAAO,KAEX,IACIsL,EADc,CAAC,MAAO,aAAc,aAAc,mBAAoB,gBAChD7R,KAAI,SAAAE,GAAM,OAChC,yBAAKC,UAAY,WAAW0B,MAAO,CAAC+K,aAAe,SAC/C,kBAAC,EAAD,CACItM,MAAUJ,EACV+M,OAAW/M,GAAU,EAAKqM,MAAM4F,eAChC/E,YAAiB,kBAAM,EAAKP,SAAS,CAACsF,eAAiBjS,KAAU4H,KAAK,SAK9EjC,EAAexE,KAAKC,MAAMgD,KAAKC,QAAO,SAAAC,GAAC,MAAiC,OAA7B,EAAK+H,MAAM4F,gBACd3N,EAAEtE,QAAU,EAAKqM,MAAM4F,kBACnE,OACI,yBAAKhS,UAAY,oBACb,yBAAKA,UAAY,cACb,4DACA,6BAAK,gCAASkB,KAAKC,MAAMiF,SAASzD,aAAezB,KAAKC,MAAMiF,SAASjG,OACrE,6BAFA,IAEM,6BAFN,SAGOe,KAAKkL,MAAM4F,eAAeC,cAHjC,kBAMJ,yBAAKjS,UAAY,OACX0R,GAEN,yBAAK1R,UAAY,OACb,kBAAC,EAAD,CACID,OAAWmB,KAAKC,MAAMpB,OACtBoE,KAASuB,EACT9B,iBAAqB1C,KAAKC,MAAMiF,e,gCAO1CjC,GACN,OAAOA,M,GAhD+BtD,IAAMC,WCK/BoR,E,iLAEb,IAAI9L,EAAWlF,KAAKC,MAAMyC,iBACtBuO,EAAkB,KACtB,IAAI/L,EACA,OAAO,KAEX,OAAOA,EAAS/F,MACZ,KAAK6C,EAASC,YACVgP,EAAkB,kBAAC,EAAD,CACdhO,KAASjD,KAAKC,MAAMgD,KACpBwC,MAAUzF,KAAKC,MAAM8C,cACrBmC,SAAalF,KAAKC,MAAMyC,mBAE5B,MACJ,KAAKV,EAASG,QACV8O,EAAkB,kBAAC,EAAD,CACdhO,KAASjD,KAAKC,MAAMgD,KACpBwC,MAAUzF,KAAKC,MAAM8C,cACrBmC,SAAalF,KAAKC,MAAMyC,mBAE5B,MACJ,KAAKV,EAASE,UACV+O,EAAkB,kBAAC,EAAD,CACdhO,KAASjD,KAAKC,MAAMgD,KACpBiC,SAAalF,KAAKC,MAAMyC,mBAE5B,MACJ,KAAKV,EAASI,UACV6O,EAAmB,kBAAC,EAAD,CACfhO,KAASjD,KAAKC,MAAMgD,KACpBwC,MAAUzF,KAAKC,MAAM8C,cACrBmC,SAAalF,KAAKC,MAAMyC,mBAE5B,MACJ,KAAKV,EAASM,QACV2O,EAAkB,kBAAC,EAAD,CACd/L,SAAalF,KAAKC,MAAMyC,mBAE5B,MACJ,KAAKV,EAASO,UACV0O,EAAkB,kBAAC,EAAD,CACd/L,SAAalF,KAAKC,MAAMyC,mBAE5B,MACJ,KAAKV,EAASQ,SACVyO,EAAkB,kBAAC,EAAD,CACdhO,KAASjD,KAAKC,MAAMgD,KACpBwC,MAAUzF,KAAKC,MAAM8C,cACrBmC,SAAalF,KAAKC,MAAMyC,mBAE5B,MACJ,QACI,MAAM,IAAI6N,MAAJ,gCAAoCvQ,KAAKC,MAAMyC,iBAAiBjD,KAG9E,OACI,yBAAKX,UAAY,eACXmS,O,GA1DuBtR,IAAMC,W,gCCE/C,SAASsR,EAAcjO,EAAMkO,GACzBlO,EAAK0B,SAAQ,SAAAxB,GAAC,OAAIA,EAAC,OAAagO,KAGpCD,EAAcE,EAAkB,cAChCF,EAAcG,EAAiB,gBAC/BH,EAAcI,EAAkB,cAChCJ,EAAcK,EAAkB,oBAEhC,IAAIC,EAAY,CACZ,cAAkBJ,EAClB,aAAiBC,EACjB,cAAkBC,EAClB,cAAkBC,EAClB,OAAWH,EAAiBvK,OAAOwK,EAAiBC,EAAkBC,IAKpEE,GAAe,CACjBzP,EAASM,QACTN,EAASO,UACTP,EAASK,YACTL,EAASE,WAIQwP,G,YACjB,aAAe,IAAD,8BACV,+CACKxG,MAAQ,CACTnI,mBAAgBwB,EAChBoN,mBAAgBpN,EAChB7B,sBAAmB6B,GAEvB,EAAKqN,kBAAoB,EAAKA,kBAAkBnL,KAAvB,gBACzB,EAAKoL,kBAAoB,EAAKA,kBAAkBpL,KAAvB,gBACzB,EAAKqL,qBAAuB,EAAKA,qBAAqBrL,KAA1B,gBATlB,E,kFAYVzG,KAAKpB,SAAWoB,KAAKC,MAAMrB,SACvBoB,KAAKpB,UAAYoB,KAAKpB,YAAYF,MAClCsB,KAAKnB,OAASH,IAAQsB,KAAKpB,WAE/BoB,KAAKwH,OAAL,eAAkBA,IAAlB,GAA+BxH,KAAKnB,OAAOkT,kBAAoB,M,+BAK/D,OADArB,QAAQC,IAAI3Q,KAAKnB,QACbmB,KAAKnB,OAIL,yBAAKC,UAAY,mBACb,yBAAKA,UAAY,OACb,yBAAKA,UAAY,YACb,kBAAC,EAAD,CACIG,MAAQ,QACRwC,YAAc,gDACdT,QAAYhB,KAAKnB,OAAOmT,OACxBzQ,SAAYvB,KAAKkL,MAAMyG,cAAgB3R,KAAKkL,MAAMyG,cAAclS,GAAK,KACrEmC,aAAgB5B,KAAK6R,qBAG7B,yBAAK/S,UAAY,YACb,kBAAC,EAAD,CACIG,MAAQ,WACRwC,YAAc,+BACdT,QAAWhB,KAAKkL,MAAMyG,cAClB3R,KAAKkL,MAAMyG,cAAclC,UACzB,KAEJlO,SAAYvB,KAAKkL,MAAMxI,iBAAmB1C,KAAKkL,MAAMxI,iBAAiBjD,GAAK,KAC3EmC,aAAgB5B,KAAK8R,wBAG7B,yBAAKhT,UAAY,YAETkB,KAAKiS,qBACL,kBAAC,EAAD,CACIhT,MAAQ,WACRwC,YAAc,+CACdT,QAAYhB,KAAKwH,OACjBjG,SAAYvB,KAAKkL,MAAMnI,cAAgB/C,KAAKkL,MAAMnI,cAActD,GAAK,KACrEmC,aAAgB5B,KAAK4R,oBAEvB,OAKd,kBAAC,EAAD,CACI3O,KAASjD,KAAKkL,MAAMgH,WACpBnP,cAAkB/C,KAAKkL,MAAMnI,cAC7BL,iBAAqB1C,KAAKkL,MAAMxI,oBA5CjC,kBAAC,EAAD,Q,2CAoDX,OADAgO,QAAQC,QACH3Q,KAAKkL,MAAMyG,mBAGZ3R,KAAKkL,MAAMxI,mBAAqB1C,KAAKkL,MAAMnI,kBAG3C/C,KAAKkL,MAAMxI,kBAAoB1C,KAAKkL,MAAMxI,iBAAiBvD,MAAQsS,GAAaU,SAASnS,KAAKkL,MAAMxI,iBAAiBvD,U,0CAMxG,IAAD,OACZa,KAAKnB,SAGTkK,SAAS9J,MAAQe,KAAKnB,OAAOI,MAC1Be,KAAKpB,YAAY4S,EAChBxR,KAAKwL,SAAS,CACV0G,WAAaV,EAAUxR,KAAKpB,YAIhCiK,GAAGuJ,IAAH,UAAUnC,GAAV,sBAA8CjQ,KAAKpB,SAAnD,SAAmEyT,MAAK,SAACpP,GACrEuO,EAAU,EAAK5S,UAAYqE,EAC3B,EAAKuI,SAAS,CACZ0G,WAAajP,U,wCAMTqP,GACdtS,KAAKwL,SAAS,CACVzI,cAAgB/C,KAAKwH,OAAO8K,EAAMvH,OAAO1J,W,wCAI/BiR,GACdtS,KAAKwL,SAAS,CACVmG,cAAgB3R,KAAKnB,OAAOmT,OAAOM,EAAMvH,OAAO1J,OAChDqB,sBAAmB6B,M,2CAKN+N,GACjB,IAAI5P,EAAmB1C,KAAKkL,MAAMyG,cAAclC,UAAU6C,EAAMvH,OAAO1J,OACvErB,KAAKwL,SAAS,CACV9I,iBAAmBA,EACnBK,cAAgB0O,GAAaU,SAASzP,EAAiBvD,MACnC,KAAOa,KAAKkL,MAAMnI,oB,GA9HZpD,IAAMC,WCrCvB2S,I,uLAEb,OAAO,yBACHvC,IAAgC,gBAAkBhQ,KAAKC,MAAM+P,IAC7DlR,UAAY,kB,GAJea,IAAMgB,gBCDhC6R,GAAb,iLAEQ,OAAO,wBAAIhS,MAAQ,CAAC+K,aAAc,SAAUvL,KAAKC,MAAMwS,cAF/D,GAA6B9S,IAAMgB,eAMtB+R,GAAb,iLAEQ,OAAO,4BAAK1S,KAAKC,MAAMwS,cAF/B,GAAgC9S,IAAMgB,eCHjBgS,G,iLAKb,OADA5J,SAAS9J,MAAQ,0BAEb,yBAAKH,UAAY,YACb,wBAAI0B,MAAS,CAAC+K,aAAe,SAA7B,mDACA,yBAAKyE,IAAG,UAAOC,GAAP,4BAAyDzP,MAAO,CAACL,OAAQ,QAASoL,aAAc,UAExG,kBAAC,GAAD,gBAEA,2NAIA,oHAIA,8LAIA,kBAAC,GAAD,oCAEA,mQAIA,mFAIA,kBAAC,GAAD,CAAWyE,IAAM,aAEjB,+FAEA,kBAAC,GAAD,CAAWA,IAAM,cAEjB,uHAEA,kBAAC,GAAD,CAAWA,IAAM,iBAEjB,+HAEA,kBAAC,GAAD,CAAWA,IAAK,gBAEhB,oGAEA,+OAIA,8FACgE,uBAAGlF,KAAO,4CAAV,c,GAvD1CnL,IAAMC,WCAvBgT,G,iLAGb,OADA7J,SAAS9J,MAAQ,kCAEb,yBAAKH,UAAY,aACb,kBAAC,GAAD,cAEA,0DAC4B,uBAAGgM,KAAO,wFAAwFC,OAAS,UAA3G,QAD5B,KAIA,kBAAC,GAAD,6BAEA,kBAAC,GAAD,sBAEA,yEAA8C,uBAAGD,KAAO,2EAA2EC,OAAS,UAA9F,QAA9C,KAEA,mNAAmL,kBAAC,IAAD,CAASrL,OAAK,EAACV,GAAK,kBAApB,QAAnL,MAEA,+hBAAogB,uBAAG8L,KAAO,6FAA6FC,OAAS,UAAhH,QAApgB,KAEA,kBAAC,GAAD,sBACA,mnBAIA,kBAAC,GAAD,oBACA,q4BAIA,kBAAC,GAAD,eAEA,yfAGA,4BACI,sCAAW,uBAAGD,KAAO,+BAA+BC,OAAS,UAAlD,cAAX,IAAqF,uBAAGD,KAAM,gCAAgCC,OAAS,UAAlD,kBAArF,IAAmK,uBAAGD,KAAO,+BAA+BC,OAAS,UAAlD,cACnK,sCAAW,uBAAGD,KAAO,8CAA8CC,OAAS,UAAjE,cAAX,IAAoG,uBAAGD,KAAO,8CAA8CC,OAAS,UAAjE,kBAApG,IAAiM,uBAAGD,KAAO,8CAA8CC,OAAS,UAAjE,cACjM,sCAAW,uBAAGD,KAAO,8CAA8CC,OAAS,UAAjE,cAAX,IAAoG,uBAAGD,KAAO,8CAA8CC,OAAS,UAAjE,kBAApG,IAAiM,uBAAGD,KAAO,8DAA8DC,OAAS,UAAjF,cACjM,qCAAU,uBAAGD,KAAO,8CAA8CC,OAAS,UAAjE,cAAV,IAAmG,uBAAGD,KAAO,8CAA8CC,OAAS,UAAjE,kBAAnG,IAAgM,uBAAGD,KAAO,8CAA8CC,OAAS,UAAjE,oB,GAxC7KpL,IAAMC,W,SC6C9BiT,G,YAtCb,aAAe,IAAD,8BACZ,+CACK3H,MAAQ,CACXgH,WAAa,KACbnP,cAAgB,KAChBL,iBAAmB,MALT,E,sEAYZ,IAAIoQ,EAAetU,OAAOC,KAAKC,KAASC,KAAI,SAAAC,GACxC,OACI,kBAAC,KAAD,CAAOc,OAAK,EAACqT,KAAI,kBAAcnU,GAAYoU,UAAa,kBAAM,kBAAC,GAAD,CAAUpU,SAAQ,UAAOA,WAK/F,OACE,kBAAC,IAAD,CAAQqU,SAAW,KACf,yBAAKnU,UAAU,iBACf,kBAAC,IAAD,CAASY,OAAK,EAACV,GAAG,KACd,4BAAI,6DAER,kBAAC,EAAD,MACA,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOU,OAAK,EAACqT,KAAK,IAAIC,UAAWL,KACjC,kBAAC,KAAD,CAAOjT,OAAK,EAACqT,KAAK,SAASC,UAAWJ,KACrCE,EACD,kBAAC,KAAD,CAAOE,UAAWjR,W,GA/BZpC,IAAMC,W,MCNxBsT,IAASC,OACP,kBAAC,GAAD,MACApK,SAASQ,eAAe,W","file":"static/js/main.858b103f.chunk.js","sourcesContent":["import React from 'react'\nimport '../css/NavigationBar.css'\nimport { NavLink } from 'react-router-dom'\nimport { surveys } from '../config/fields.json'\n\nexport default class NavigationBar extends React.Component { \n    constructor() {\n        super();\n    }\n    render() {\n        let surveyLinks = Object.keys(surveys).map(surveyId => {\n            let survey = surveys[surveyId]\n            return (\n                <li className = \"nav-item\">\n                    <NavLink className=\"nav-link\" activeClassName=\"active\" to={`/survey/${surveyId}`}>\n                        {survey.title}\n                    </NavLink>\n                </li>\n            )\n        })\n        return (\n            <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\">\n                {/*<a class=\"navbar-brand\" href=\"#\">Understanding Economics</a>*/}\n                <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarColor01\" aria-controls=\"navbarColor01\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                    <span class=\"navbar-toggler-icon\"></span>\n                </button>\n\n                <div class=\"collapse navbar-collapse\" id=\"navbarColor01\">\n                    <ul class=\"navbar-nav mr-auto\">\n                    <li className = \"nav-item\">\n                        <NavLink exact className=\"nav-link\" activeClassName=\"active\" to=\"/\">\n                            Home\n                        </NavLink> \n                    </li>\n                    <li className = \"nav-item\">\n                        <NavLink exact className=\"nav-link\" activeClassName=\"active\" to=\"/about\">\n                            About\n                        </NavLink> \n                    </li>\n                    {surveyLinks}\n                    </ul>\n                </div>\n            </nav>\n        )\n    }\n    componentDidMount() {\n\n    }\n}","import React from 'react'\n\nexport default class ScrollableDesc extends React.PureComponent {\n    render() {\n        let textStyle = {\n            minHeight : this.props.minHeight,\n            maxHeight : this.props.maxHeight,\n            height : this.props.height,\n            paddingRight: \"10px\"\n        }\n        return (\n            <div>\n                <div className = \"row\">\n                    <strong>{this.props.title}</strong>\n                </div>\n                <span className = \"row scrolling\" dangerouslySetInnerHTML={{__html : this.props.content}} style = {textStyle} ref = {this.descDivRef}>\n                </span>\n            </div>\n        )\n    }\n}","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../css/FieldSelect.css'\nimport '../App.css'\nimport ScrollableDesc from './ScrollableDesc';\n\nexport default class FieldSelect extends React.Component { \n    constructor() { \n        super();\n        this.slctDivRef = React.createRef();\n        this.descDivRef = React.createRef();\n        this.slctRef = React.createRef();\n    }\n\n    render() {\n        if(!this.props.options) {\n            return null;\n        }\n        let optionComponents = getValues(this.props.options).map((option) => {\n            return <option value = {option.id}>{option.title}</option>\n        });\n        let selectedTitle = this.props.selected ? this.props.options[this.props.selected].title : \"\";\n        let selectedDescription = this.props.selected ? this.props.options[this.props.selected].description : \"\";\n        return (\n            <div className = \"FieldSelect\">\n                <div className = \"row\">\n                    <h4>{this.props.title}</h4>\n                </div>\n                <div className = \"row\">\n                    <span>{this.props.description}</span>\n                </div>\n                <div className = \"row slctDiv\" ref = {this.slctDivRef}>\n                    <select className = \"align-left\" size = {7} ref = {this.slctRef} value = {this.props.selected} onChange={this.props.handleSelect}>\n                        {optionComponents}\n                    </select>\n                </div>\n                <ScrollableDesc \n                    title = {selectedTitle} \n                    content = {selectedDescription}\n                    maxHeight = \"110px\"\n                    minHeight = \"75px\"\n                />\n            </div>\n        );\n    }\n\n    componentDidUpdate() {\n        if(this.slctRef.current && !this.props.selected) { \n            this.slctRef.current.selectedIndex = \"-1\";\n        }\n    }\n}\n\nfunction getValues(dict) {\n    return Object.keys(dict).map(key => dict[key])\n}\n\nFieldSelect.propTypes = { \n    title : PropTypes.string,\n\n}","import React from 'react'\n\nexport default class NotFound extends React.Component {\n    render() {\n        return (\n            <div>\n                <h1>Page not found</h1> <br/>\n                <h3>Please double check the URL and try again</h3>\n            </div>\n        )\n    }\n}","const DataType = \n{\n    CATEGORICAL :  \"CATEGORICAL\", \n    FREQUENCY : \"FREQUENCY\", \n    NUMERIC : \"NUMERIC\",\n    TREATMENT : \"TREATMENT\",\n    MULTICHOICE : \"MULTICHOICE\",\n    KEYNESS : \"KEYNESS\",\n    WORDCLOUD : \"WORDCLOUD\",\n    UMBRELLA : \"UMBRELLA\"\n}\n\nexport default DataType;","import React from 'react'\n\nexport default class DataView extends React.Component {\n    render() {\n        if(!this.props.selectedQuestion ) {\n            return null;\n        }\n        return (\n            <div className=\"DataView text-center\" style={{width: \"100%\", marginLeft : \"0px\"}}>\n                <div id = {this.props.elementId} style={{width:\"100%\"}}></div>\n            </div>\n        )\n    }\n    componentDidMount() {\n        this.componentDidUpdate();\n    }\n\n    componentDidUpdate() {\n        let selectedGroup = this.props.selectedGroup;\n        let selectedQuestion = this.props.selectedQuestion; \n        let renderFunction = this.props.renderFunction;\n        if (selectedQuestion && this.props.data) {\n            let data = this.props.data.filter(x => (!selectedGroup || x[selectedGroup.id]) && x[selectedQuestion.id] && true)\n            renderFunction(this.props.elementId, selectedGroup, selectedQuestion, data);\n        }\n    }\n}","const Colors = {\n    Histogram : [\"#00e699\"],\n    Categorical : [\"#00e699\", \"#008ae6\", \"#aa80ff\", \"#ff80ff\", \"#ff6666\", \"#ff9933\"],\n    Gradient3 : [\"#00e699\", \"#008ae6\", \"#aa80ff\"], \n    Gradient4 : [\"#00e699\", \"#008ae6\", \"#aa80ff\", \"#ff6666\"], \n    Gradient5 : [\"#00e699\", \"#008ae6\", \"#aa80ff\", \"#ff80ff\", \"#ff6666\"]\n}\n\nexport default Colors","/* eslint no-undef: \"off\"*/\nimport Colors from './Colors'\nconst Utils = {\n    getUniqueDictVals: function(data, key, sorter) {\n        let vals = data.map(x => x[key]);\n        var uniqueVals = vals.filter((v, i, a) => a.indexOf(v) === i);\n        return uniqueVals.filter(x => x && x.trim().length > 0).sort(sorter);\n    },\n\n    // For each group, gets the proportion of each response\n    /**\n     *\n     * @param {array} data array of dictionaries representing the data\n     * @param {string} groupKey the group that we want proportions for\n     * @param {string} groupVal the specific group value that we want proportions for\n     * @param {string} responseKey the dictionary key of the response variable that we want proportions for\n     */\n     /* getProportions : function(data, groupKey, groupVal, responseKey){\n       var final_result = [];\n       var unique_rkeys = [];\n\n       for (var i = 0; i < data.length; i++) {\n           var rKey = data[i].responseKey;\n           if (unique_rkeys.includes(rKey)){\n               continue;\n           } else {\n               unique_rkeys.push(rKey);\n           }\n       }\n\n       var total_responses = data.length\n\n       for (i = 0; i < unique_rkeys.length; i++) {\n         var response_key = unique_rkeys[i]\n         final_result.push({\n            response_key: 0\n         })\n         for (var j = 0; j < data.length; j++) {\n             var gKey = data[j].groupKey;\n             var gVal = data[j].groupVal;\n             var rKey = data[j].responseKey;\n\n             if (rKey = response_key){\n                 final_result.response_key = final_result.response_key + 1;\n             } else {\n                 continue;\n             }\n          }\n\n          final_result.response_key = final_result.response_key / total_responses;\n\n        }\n\n         return final_result;\n\n     },*/\n\n    getCounts : function(data, responseKey) {\n        let responseVals = this.getUniqueDictVals(data, responseKey, undefined);\n        let filteredData = data.filter(x => x[responseKey] != undefined);\n        let countsDict = {}\n        for(let val of responseVals) {\n            countsDict[val] = 0;\n        }\n        filteredData.forEach(x => countsDict[x[responseKey]]++);\n        let propsDict = {};\n        for(let val of responseVals){ \n            propsDict[val] = countsDict[val]; \n        }\n        return propsDict;\n    }, \n    getProportions : function(data, groupKey, groupVal, responseKey) {\n         let responseVals = this.getUniqueDictVals(data, responseKey, undefined);\n         let filteredData = data.filter(x => (x[groupKey] == groupVal || groupVal == \"All\") && x[responseKey] != undefined);\n         let countsDict = {}\n         for(let val of responseVals) {\n             countsDict[val] = 0;\n         }\n\n         let total = filteredData.length;\n         filteredData.forEach(x => countsDict[x[responseKey]]++);\n         let propsDict = {};\n         for(let val of responseVals){ \n             propsDict[val] = countsDict[val] / total;\n         }\n         return propsDict;\n    },\n\n    getQuestionSorter: function(question) {\n        if(question.sorter) {\n            return $.pivotUtilities.sortAs(question.sorter);\n        }\n        else {\n            return (a, b) => a.localeCompare(b);\n        }\n    },\n\n    getGroupSorter: function(group) {\n        if(group.sorter) {\n            return (a, b) => {\n                if (a == \"All\") return -1;\n                if (b == \"All\") return 1;\n                else return $.pivotUtilities.sortAs(group.sorter)(a, b);\n            }\n        }\n        else {\n            return (a, b) => {\n                if (a == \"All\") return -1;\n                if (b == \"All\") return 1;\n                else return a.localeCompare(b)\n            }\n        }\n    },\n\n    getColorPattern: function(question) {\n        let colorPattern = question.color && typeof(question.color == \"string\")\n        && question.color in Colors ? Colors[question.color] : question.color;\n        if(colorPattern) return colorPattern\n        else return Colors.Categorical\n    }\n}\n\nexport default Utils;\n","/* eslint no-undef: \"off\"*/\nimport React from 'react'\nimport DataView from './DataView'\nimport './../css/CrossTabView.css'\nimport Utils from '../Utils'\n\nexport default class CrossTabView extends React.Component {\n    render() {\n        return <DataView \n                    elementId = \"crosstab\" \n                    survey = { this.props.survey }\n                    data = { this.props.data }\n                    selectedGroup = { this.props.selectedGroup }\n                    selectedQuestion = { this.props.selectedQuestion }\n                    renderFunction = { this.renderCrossTabs }\n                />\n    }\n\n    renderCrossTabs(elementId, selectedGroup, selectedQuestion, data) {\n        let cleanData = data.map((x) => { return {group : x[selectedGroup.id] || \" No Response\", response : x[selectedQuestion.id] || \" No Response\"} });\n        let groupSorter = Utils.getGroupSorter(selectedGroup);\n        let responseSorter = Utils.getQuestionSorter(selectedQuestion)\n        let sorters = {\n            group : groupSorter,\n            response : responseSorter,\n        }\n        $(`#${elementId}`).pivot(cleanData, \n            {\n                rows : [\"group\"],\n                cols: [\"response\"],\n                aggregator: $.pivotUtilities.aggregators[\"Count\"](),\n                sorters : sorters\n            });\n    }\n}","/* eslint no-undef: \"off\"*/\nimport React from 'react'\nimport DataView from './DataView'\nimport Colors from '../Colors'\nimport '../css/ChartView.css'\nimport Utils from '../Utils'\nimport merge from 'deepmerge'\n\nexport default class StackedChartView extends React.PureComponent { \n    render() {\n        return <DataView\n                    elementId = {this.props.elementId || \"chart\"}\n                    survey = { this.props.survey }\n                    data = { this.props.data }\n                    selectedGroup = { this.props.selectedGroup }\n                    selectedQuestion = { this.props.selectedQuestion }\n                    renderFunction = { this.renderChart.bind(this) }\n                />\n    }\n\n    renderChart(elementId, selectedGroup, selectedQuestion, data) {\n        let cleanData = data.map(x => {\n            return {\n                [selectedGroup.id]: x[selectedGroup.id] || \" No response\",\n                [selectedQuestion.id]: x[selectedQuestion.id] || \" No response\"\n            };\n        });\n        let groupSorter = Utils.getGroupSorter(selectedGroup);\n        let responseSorter = Utils.getQuestionSorter(selectedQuestion)\n        let colorPattern = Utils.getColorPattern(selectedQuestion);\n        let groupVals = [\"All\"].concat(Utils.getUniqueDictVals(cleanData, selectedGroup.id, groupSorter));\n        let responseVals = Utils.getUniqueDictVals(cleanData, selectedQuestion.id, responseSorter);\n        let proportions = {}\n        for(let groupVal of groupVals) {\n            proportions[groupVal] = Utils.getProportions(cleanData, selectedGroup.id, \n                groupVal, selectedQuestion.id, responseSorter); \n        }\n        let chartData = responseVals.map(responseVal => {\n            return [responseVal, ... groupVals.map(x => proportions[x][responseVal])]\n        });\n\n        const barWidth = 75;\n        let chart = c3.generate(merge.all([{\n            bindto: `#${elementId}`,\n            data : { \n                columns: chartData,\n                groups : [responseVals],\n                type : \"bar\", \n                order: null\n            },\n            size : {\n                width: $(`#${elementId}`).parent().width()\n            }, \n            color : {\n                pattern : colorPattern || Colors.Categorical\n            },\n            legend : {\n                item : {\n                    onclick : function() {}\n                }, \n                show: false\n            },\n            padding : {\n                left : 150\n            },\n            tooltip: {\n                grouped : false\n            }, \n            bar : {\n                width:{ \n                    ratio: 0.75\n                }\n\n            }, \n            size : {\n                height: groupVals.length * barWidth\n            },\n            axis : {\n                rotated : true, \n                x : {\n                    type: \"category\", \n                    categories: groupVals\n                }, \n                y : {\n                    // This is some hacky shit to get rid of the 110% display\n                    max : 0.95,\n                    label: \"Proportion\",\n                    tick : {\n                        format: d3.format(\".0%\")\n                    }\n                }\n            },\n        }, this.props.c3Override || {}]));\n        for(let elt of document.getElementsByClassName(\"c3-axis-y-label\")) {\n            elt.innerHTML = \"Proportion\";\n        }\n        // document.getElementById(elementId).getElementsByTagName(\"p\")[0].remove();\n\n        if(selectedQuestion.correct != undefined) {\n            let bars = document.getElementsByClassName(`c3-target-${selectedQuestion.correct.replace(\" \", \"-\")}`);\n            for(let i = 0; i < bars.length; i++){\n                bars[i].style.setProperty(\"opacity\", \"1.0\", \"!important\");\n            }\n        }\n\n        // some hacky stuff to handle the treatment chart views and adjust the label size.\n        // should try to find some other way to deal with this at some point\n        let ChartLabel = document.getElementById(\"ChartLabel\");\n        if (ChartLabel) {\n            ChartLabel.style.height = document.getElementsByClassName(\"c3-event-rect\")[0].height.baseVal.value + \"px\";\n        }\n        if(this.props.receiveChart) {\n            this.props.receiveChart(chart); \n        }\n    }\n}","import React from 'react'\nimport Colors from '../Colors'\nimport Utils from '../Utils';\n\nexport default class ChartLegend extends React.PureComponent {\n    render() { \n        if (!this.props.question || !this.props.data) {\n            return null;\n        }\n        let colorPattern = Utils.getColorPattern(this.props.question); \n        let responses = Utils.getUniqueDictVals(this.props.data, this.props.question.id, \n                            Utils.getQuestionSorter(this.props.question));\n        let legendItems = responses.map((val, i) => \n        <div className = \"col-md text-center card unselectable\"\n            onMouseOver={() => {\n                if(this.props.charts){\n                    for(let chart of this.props.charts) {\n                        chart.focus(val);\n                    }\n                }\n            }}\n            onMouseLeave={() => {\n                if(this.props.charts){\n                    for(let chart of this.props.charts) {\n                        chart.revert();\n                    }\n                }\n            }}\n            style = {{\n                color : \"black\",\n                backgroundColor: colorPattern[i % colorPattern.length],\n                margin: \"3px\",\n                fontSize : \"13px\",\n                minHeight: \"30px\",\n                maxWidth: \"33%\", \n                padding: \"3px\",\n                marginLeft: i == 0 ? \"auto\" : \"3px\", \n                marginRight: i == responses.length - 1 ? \"auto\" : \"3px\",\n                marginTop: \"10px\",\n                opacity : val == this.props.question.correct ? 1.0 : 0.8\n        }}>\n            <strong>{val}</strong>\n        </div>)\n        return <div className = \"row legend\" style={{marginLeft: \"auto\", marginRight: \"auto\", width:\"100%\"}}>\n            {legendItems}\n        </div>\n    }\n}","import React from 'react'\n\nexport default class CorrectDisplay extends React.PureComponent {\n    render() {\n        if (!this.props.question || !this.props.question.correct) {\n            return null;\n        }\n        let formatter =  this.props.formatter || (x => x);\n        let sourceText = null; \n        if(this.props.question.source) {\n            if (this.props.question.source_url) {\n                sourceText = <span>    (Source: <a href = {this.props.question.source_url} target = \"_blank\">{this.props.question.source}</a>)</span>\n            }\n            else{\n                sourceText = <span>    (Source: {this.props.question.source})</span>\n            }\n        }\n        return <div className = \"header\">\n            <strong style={{color:\"green\", fontSize:\"14pt\"}}>Correct Answer: {formatter(this.props.question.correct)}</strong>\n            <em style={{fontSize:\"8pt\", marginLeft: \"5px\", verticalAlign: \"top\"}}>\n                {sourceText ? sourceText : null}\n            </em>\n        </div>\n    }\n}","import React from 'react'\nimport CrossTabView from './CrossTabView'\nimport StackedChartView from './StackedChartView'\nimport ChartLegend from './ChartLegend'\nimport CorrectDisplay from './CorrectDisplay'\nimport '../css/CategoricalDisplay.css'\n\nexport default class CategoricalDisplay extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            showTable : false\n        }\n        this.receiveChart = this.receiveChart.bind(this);\n    }\n    render() {\n        if(!this.props.question || !this.props.group) {\n            return null;\n        }\n        return (\n            <div className = \"CategoricalDisplay\">\n                <div className = \"row header\">\n                    <h5>Proportion of responses to:<br/><strong>{this.props.question.description || this.props.question.title}</strong> <br/> <br/> \n                    By <strong>{this.props.group.title}</strong></h5>\n                </div>\n                <div className = \"row\">\n                    <CorrectDisplay question = {this.props.question} />\n                </div>\n                <div className = \"row\" style = {{paddingLeft:\"20px\"}}>\n                    <ChartLegend \n                        data = { this.props.data }\n                        question = { this.props.question }\n                        charts = { [this.state.chart] }\n                    />\n                </div>\n                <div className = \"row\">\n                    <StackedChartView\n                        survey = { this.props.survey } \n                        data = { this.props.data }\n                        selectedGroup = { this.props.group }\n                        selectedQuestion = { this.props.question }\n                        receiveChart = { this.receiveChart }\n                    />\n                </div>\n\n                <div className = \"row text-center\">\n                    <button onClick = {this.toggleTable.bind(this)} className = \"card toggleButton\">\n                        {this.state.showTable ? \"Hide\" : \"Show\"} answer distribution table\n                    </button>\n                </div>\n                <div className = \"row\" style = {{minHeight: \"50px\", marginBottom: \"30px\"}}>\n                    { this.state.showTable ? \n                        <CrossTabView\n                            survey = { this.props.survey } \n                            data = { this.props.data }\n                            selectedGroup = { this.props.group }\n                            selectedQuestion = { this.props.question }\n                        /> : null\n                    } \n                </div>\n            </div>\n        )\n    }\n\n    receiveChart(chart) {\n        this.setState({\n            chart : chart\n        })\n    }\n\n    toggleTable() {\n        this.setState ({ \n            showTable : !this.state.showTable\n        });\n    }\n\n    cleanData(data) {\n        return data; \n    }\n}","import React from 'react'\nimport '../css/StatBubble.css'\n\nexport default class StatBubble extends React.PureComponent { \n    render() { \n    let style = this.props.title == \"All\" ? { textDecoration : \"underline\" } : {};\n    let classNames = \"StatBubble text-center card h-100 \" + (this.props.active ? \"activeBubble\" : \"\");\n        return (\n            <a href=\"#\" className = {classNames} onClick = { (e) => {e.preventDefault(); this.props.handleClick()}}>\n                <strong className = \"BubbleTitle\" style = {style}>{this.props.title == \"All\" ? this.props.title.toUpperCase() : this.props.title}</strong>\n                {\n                    this.props.stat ? \n                    (this.props.formatter ? this.props.formatter(this.props.stat.toFixed(0)) : this.props.stat.toFixed(0)) :\n                    null\n                }\n            </a>\n        )\n    }\n}","/* eslint no-undef: \"off\"*/\nimport React from 'react'\nimport DataView from './DataView'\nimport Colors from '../Colors'\nimport '../css/HistogramView.css'\n\nexport default class HistogramView extends React.Component { \n    constructor() {\n        super();\n        this.renderHistogram = this.renderHistogram.bind(this);\n    }\n    render() {\n        return (\n        <div style={{width: \"100%\"}}> \n            <h5 className = \"text-center\">\n                Distribution of responses by group: <strong>{this.props.groupVal}</strong>\n            </h5>\n            <DataView\n                elementId = \"histogram\"\n                survey = { this.props.survey }\n                data = { this.props.data }\n                selectedGroup = { this.props.selectedGroup }\n                selectedQuestion = { this.props.selectedQuestion }\n                renderFunction = { this.renderHistogram }\n            />\n        </div>\n        )\n    }\n\n    shouldComponentUpdate(nextProps, nextState) { \n        if(nextProps.selectedGroup != this.props.selectedGroup || nextProps.selectedQuestion != this.props.selectedQuestion) {\n            this.chart = null;\n        }\n        return true;\n    }\n\n    renderHistogram(elementId, selectedGroup, selectedQuestion, data) {\n        let dataNumeric = data.map(x => Number(x[selectedQuestion.id]));\n        let cleanData = data.filter(x => this.props.groupVal === \"All\" || x[selectedGroup.id] == this.props.groupVal)\n                            .map(x => Number(x[selectedQuestion.id]));\n\n        let nticks = selectedQuestion.nticks ? selectedQuestion.nticks : 15;\n        let correctList = selectedQuestion.correct ? [selectedQuestion.correct] : [];\n        let dataWithCorrect = dataNumeric.concat(correctList);\n        let scale = d3.scaleLinear()\n                        .domain([d3.min(dataWithCorrect), d3.max(dataWithCorrect)])\n                        .range([d3.min(dataWithCorrect), d3.max(dataWithCorrect)]);\n\n        let histogram = d3.histogram()\n                            .domain([d3.min(dataWithCorrect), d3.max(dataWithCorrect)])\n                            .thresholds(scale.ticks(nticks));\n        \n        let bins = histogram(cleanData);\n        let binSizes = bins.map(x => x.length);\n        let categories = bins.map(bin => `${bin[\"x0\"]}-${bin[\"x1\"]}`);\n        let correctBin = selectedQuestion.correct ? histogram([selectedQuestion.correct]).filter(x => x.length > 0)[0] : null;\n        if(!this.chart) {\n            this.chart = c3.generate({\n                bindto: `#${elementId}`,\n                data : {\n                    columns : [['count', ... binSizes]],\n                    types : { \n                        'count' : 'bar'\n                    }\n                },\n                grid : {\n                    x: {\n                        lines : (correctBin ? \n                                [{\n                                    value : `${correctBin[\"x0\"]}-${correctBin[\"x1\"]}`, \n                                    text : `Correct: ${this.props.formatter(selectedQuestion.correct)}`, \n                                    class: \"correct_line\",\n                                    position: \"middle\", \n                                }\n                                ] : [])\n                    },\n                },\n                color : {\n                    pattern : Colors.Histogram\n                }, \n                axis : {\n                    x : {\n                        type : 'category',\n                        categories : categories\n                    }\n                },\n                bar: {\n                    width: {\n                        ratio: 1\n                    }\n                },\n            });\n        }\n        else {\n            this.chart.load({\n                columns : [['count', ... binSizes]]\n            })\n        }\n    }\n}","const NumberFormats = { \n    percent : s => `${s}%`,\n    dollar : s => `$${s}`\n}\n\nexport default NumberFormats","import React from 'react'\nimport StatBubble from './StatBubble'\nimport '../css/NumericDisplay.css'\nimport HistogramView from './HistogramView'\nimport NumberFormats from '../NumberFormats'\nimport Utils from '../Utils'\nimport CorrectDisplay from './CorrectDisplay'\n\nexport default class NumericDisplay extends React.Component {\n    constructor() { \n        super();\n        this.state = {\n            selectedGroupVal : \"All\"\n        };\n    }\n    render() { \n        if(!this.props.question || !this.props.group) {\n            return null;\n        }\n        let data = this.cleanData(this.props.data);\n        let averages = this.calcAverages(data).sort((a, b) => Utils.getGroupSorter(this.props.group)(a.groupVal, b.groupVal));\n        let formatter = NumberFormats[this.props.question.format] || (x => x);\n        let statBubbles = averages.map(x => \n            <div className = \"col-md-3\" style={{marginBottom : \"10px\"}}>\n                <StatBubble \n                    title = { x.groupVal }\n                    stat = { x.average }\n                    active = { x.groupVal == this.state.selectedGroupVal }\n                    handleClick = { this.createClickHandler(x.groupVal) }\n                    formatter = { formatter }\n                />\n            </div>\n        );\n        return (\n            <div className = \"NumericDisplay\">\n                <div className = \"row header\">\n                    <h5>Average response to \"<strong>{this.props.question.description}</strong>\" <br/><br/>\n                    By <strong>{this.props.group.title}</strong></h5>\n                </div>\n                <div className = \"row\">\n                    <CorrectDisplay question ={this.props.question} formatter = {formatter} />\n                </div>\n                <div className = \"row\">\n                    { statBubbles }\n                </div>\n                <div className = \"row\">\n                    <HistogramView\n                        survey = { this.props.survey } \n                        data = { this.cleanData(this.props.data) }\n                        selectedGroup = { this.props.group }\n                        selectedQuestion = { this.props.question }\n                        groupVal = { this.state.selectedGroupVal }\n                        formatter = {formatter}\n                    />\n                </div>\n            </div>\n        )\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState({\n            selectedGroupVal : \"All\"\n        })\n    }\n\n    cleanData(data) {\n        let filteredData = data.filter(x => x[this.props.group.id] && x[this.props.question.id]);\n        let sortedData = filteredData.sort((a, b) => a[this.props.question.id] - b[this.props.question.id]);\n        return filteredData.filter(x => sortedData.indexOf(x) <= 0.95 * sortedData.length);\n    }\n    \n    createClickHandler(groupVal) {\n        return function() {\n            this.setState({\n                selectedGroupVal : groupVal\n            });\n        }.bind(this);\n    }\n    \n    calcAverages(data) {\n        let acc = {\n            All : {\n                sum : 0,\n                count : 0\n            }\n        }\n        let groupId = this.props.group.id;\n        let questionId = this.props.question.id;\n        for(let row of data) {\n            let groupVal = row[groupId];\n            if(!(groupVal in acc)) {\n                acc[groupVal] = {sum : 0, count : 0}\n            }\n            acc.All.sum += Number(row[questionId]);\n            acc.All.count++;\n            acc[groupVal].sum += Number(row[questionId]);\n            acc[groupVal].count++; \n        }\n        \n        return Object.keys(acc).map(k => { \n            return {groupVal : k, average : acc[k].count > 0 ? acc[k].sum / acc[k].count : 0}\n        })\n    }\n}","import React from 'react'\nimport StackedChartView from './StackedChartView'\n\nexport default class TreatmentChartView extends React.PureComponent {\n    render() { \n        let c3Overrides = { \n            axis : {\n                rotated : true, \n                x : {\n                    show : false\n                }, \n                y : {\n                    show : false\n                }\n            },\n            padding : {\n                left: 0\n            }\n        }\n\n        return <StackedChartView \n            survey = { this.props.survey } \n            data = { this.props.data }\n            selectedGroup = { this.props.selectedGroup }\n            selectedQuestion = { this.props.selectedQuestion }\n            elementId = { this.props.elementId }\n            c3Override = { c3Overrides }\n            receiveChart = { this.props.receiveChart }\n        />\n    }\n}","/* eslint no-undef: \"off\"*/\nimport React from 'react'\nimport Utils from '../Utils'\n\nexport default class DummyChartView extends React.Component {\n    render() { \n        let c3Overrides = { \n            axis : {\n                x : {\n                    show : true\n                }, \n                y : {\n                    show : false\n                }\n            }, \n            color: { \n                pattern : [\"#ffffff\"]\n            },\n            tooltip : {\n                show: false\n            },\n        }\n\n        let sorter = null;\n        if(this.props.selectedGroup.sorter) {\n            sorter = $.pivotUtilities.sortAs(this.props.selectedGroup.sorter);\n        }\n        else {\n            sorter = (a, b) => a.localeCompare(b);\n        }\n\n        let displayElts = [\"All\", ...Utils.getUniqueDictVals(this.props.data, this.props.selectedGroup.id, sorter)]\n                            .map(x => <tr style={{overflow: \"hidden\"}}><td><strong>{x}</strong></td></tr>);\n\n        return <table id = \"ChartLabel\" style={{marginTop: \"2%\"}}>\n            <tbody style={{fontSize : \"12px\"}}>\n                {displayElts}\n            </tbody>\n        </table>\n\n        /* return <ChartView \n            survey = { this.props.survey } \n            data = { this.props.data }\n            selectedGroup = { this.props.selectedGroup }\n            selectedQuestion = { this.props.selectedQuestion }\n            elementId = { this.props.elementId }\n            c3Override = { c3Overrides }\n        />*/ \n    }\n    \n    componentDidMount() {\n        this.componentDidUpdate();\n    }\n\n    componentDidUpdate() {\n        /* let chartElement = document.getElementById(this.props.elementId);\n        let legendItems = chartElement.getElementsByClassName(\"c3-legend-item\");\n        for(let item of legendItems) {\n            item.style.display = \"none\";\n        }\n\n        chartElement.getElementsByClassName(\"c3-chart\")[0].style.display = \"none\";\n        chartElement.getElementsByClassName(\"domain\")[0].style.display = \"none\";\n        let lines = chartElement.getElementsByTagName(\"line\");\n        for(let line of lines) {\n            line.style.display = \"none\";\n        }\n        \n        chartElement.getElementsByClassName(\"c3-axis-x-label\")[0].style.display = \"none\";\n\n        chartElement.getElementsByClassName(\"c3-axis-x\")[0].setAttribute(\"style\", \"font-weight: bold\"); */\n    }\n}","import React from 'react'\nimport TreatmentChartView from './TreatmentChartView'\nimport ScrollableDesc from './ScrollableDesc'\nimport DummyChartView from './DummyChartView'\nimport ChartLegend from './ChartLegend'\nimport Utils from '../Utils';\n\nexport default class TreatmentDisplay extends React.Component { \n    constructor(props) {\n        super(props);\n        this.state = {\n            charts : [] \n        };\n        this.charts = []\n        this.receiveChart = this.receiveChart.bind(this);\n    }\n\n    render() {\n        if(!this.props.question || !this.props.group) {\n            this.charts = []\n            return null;\n        }\n        // Ugh, more hacky shit. \n        // Basically we need to adjust the column size based on how many treatment groups there are\n        // But bootstrap is too stupid to figure it out by itself\n        let columnWidth = `col-md-${10 - 2 * this.props.question.questions.length}`;\n        let chartViews = this.props.question.questions.map(question => \n            <div className = {columnWidth} style = {{paddingLeft: '0px'}}>\n                <TreatmentChartView\n                    survey = { this.props.survey } \n                    data = { this.props.data.filter(x => question.treatments.indexOf(x[\"mechanisms_rando\"]) >= 0) }\n                    selectedGroup = { this.props.group }\n                    selectedQuestion = { {color: this.props.question.color, sorter: this.props.question.sorter, ...question} }\n                    elementId = {`${question.title}_chart`}\n                    receiveChart = {this.receiveChart}\n                />\n            </div>\n        )\n\n        let colorPattern = Utils.getColorPattern(this.props.question);\n\n        let descriptions = this.props.question.questions.map(question => \n            <div className = {columnWidth}>\n                <ScrollableDesc\n                    title = {question.title}\n                    content = {question.description}\n                    maxHeight = {\"140px\"}\n                />\n            </div>\n            )\n        return(\n            <div className = \"TreatmentDisplay\">\n                <div className = \"row\">\n                    <h5>\n                        Responses to: <br/> \n                        <strong>{this.props.question.title}</strong> <br/><br/>\n\n                        Grouped by <strong>{this.props.group.title}</strong>\n\n                    </h5>\n                </div>\n                <div className = \"row\">\n                    <div className = \"col-md-3\">\n                        <strong style = {{position: \"absolute\", bottom: \"0\", marginLeft: \"-20px\"}}>{this.props.group.title}</strong>\n                    </div>\n                    <div className = \"col-md-9\">\n                        <div className = \"row\">\n                            {descriptions}\n                        </div>\n                    </div>\n                </div>\n                <div className = \"row\">\n                    <div className = \"col-md-3\"></div>\n                    <div className = \"col-md-9\" style={{paddingLeft: \"0px\"}}>\n                        <ChartLegend \n                            data = { this.props.data }\n                            question = { this.props.question }\n                            charts = { this.state.charts }\n                        />\n                    </div>\n                </div>\n                <div className = \"row\">\n                    <div className = \"col-md-3\">\n                        <DummyChartView \n                            survey = { this.props.survey } \n                            data = { this.props.data }\n                            selectedGroup = { this.props.group }\n                            selectedQuestion = { this.props.question }\n                            elementId = {`dummy_chart`}\n                        />\n                    </div>\n                    <div className = \"col-md-9\">\n                        <div className = \"row\">\n                            {chartViews}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n    receiveChart(chart) {\n        this.charts.push(chart);\n        if(this.charts.length == this.props.question.questions.length) {\n            this.setState({\n                charts : this.charts\n            })\n        }\n    }\n}","import React from 'react'\n\nexport default class ImageView extends React.PureComponent {\n    render() {\n        return <div className = \"ImageView text-center\">\n            <img src={`${process.env.PUBLIC_URL}/images/${this.props.question.img_url}`}\n                style = {{\n                    maxWidth: \"75%\",\n                    height: \"auto\"\n                }}\n            />\n        </div>\n    }\n}","import React from 'react'\nimport ImageView from './ImageView'\n\nexport default class KeynessDisplay extends React.PureComponent { \n    render() { \n        return <div className = \"KeynessDisplay\">\n            <div className = \"row header \">\n                <h5>{this.props.question.description}</h5>\n            </div>\n\n            <div className = \"row\">\n                <ImageView \n                    question = {this.props.question}\n                />\n            </div>\n            \n        </div>\n    }   \n}","import React from 'react'\nimport ImageView from './ImageView'\n\nexport default class WordcloudDisplay extends React.Component { \n    render() { \n        return (\n        <div className = \"Wordcloud Display\">\n            <div className = \"row header \">\n                <h5>{this.props.question.description}</h5>\n            </div>\n\n            <div className = \"row\">\n                <ImageView \n                    question = {this.props.question}\n                />\n            </div>\n        </div>\n        )\n    }\n}","import React from 'react'\nimport StatBubble from './StatBubble'\nimport DataDisplay from './DataDisplay'\n\nexport default class UmbrellaDisplay extends React.Component {\n    constructor(){\n        super();\n        this.state = {\n            question : undefined\n        }\n    }\n    render() {\n        if(!this.props.group) {\n            return null;\n        }\n        let subquestions = this.props.question.questions;\n        let selectedQuestion = this.state.question || subquestions[0];\n        if(subquestions == undefined) {\n            throw new Error(\"No subquestions for Umbrella display\")\n        }\n        let bubbles = subquestions.map(question => \n            <div className = \"col-md-3\" style={{marginBottom : \"10px\"}}>\n                <StatBubble\n                    title = { question.title }\n                    active = { question == selectedQuestion }\n                    handleClick = { (() => this.handleClick(question)).bind(this) }\n                />\n            </div>    \n        )\n\n        return (\n            <div className = \"UmbrellaDisplay\">\n                <div className = \"row\">\n                    <h5>{ this.props.question.description }</h5>\n                </div>\n                <div className = \"row\">\n                    { bubbles }\n                </div>\n                <DataDisplay\n                    data = { this.props.data }\n                    selectedGroup = { this.props.group }\n                    selectedQuestion = { selectedQuestion }\n                />\n            </div>\n        )\n    }\n\n    handleClick(question) {\n        this.setState({\n            question : question\n        });\n    }\n}","/* eslint no-undef: \"off\"*/\nimport React from 'react'\nimport DataView from './DataView'\nimport Colors from '../Colors'\nimport '../css/ChartView.css'\nimport Utils from '../Utils'\nimport merge from 'deepmerge'\n\nexport default class FrequencyChartView extends React.PureComponent { \n    render() {\n        return <DataView\n                    elementId = {this.props.elementId || \"chart\"}\n                    survey = { this.props.survey }\n                    data = { this.props.data }\n                    selectedQuestion = { this.props.selectedQuestion }\n                    renderFunction = { this.renderChart.bind(this) }\n                />\n    }\n\n    renderChart(elementId, selectedGroup, selectedQuestion, data) {\n        console.log(\"Rendering\");\n        let cleanData = data.map(x => {\n            return {\n                [selectedQuestion.id]: x[selectedQuestion.id] || \" No response\"\n            };\n        });\n        let responseSorter = Utils.getQuestionSorter(selectedQuestion)\n        let colorPattern = Utils.getColorPattern(selectedQuestion);\n        let responseVals = Utils.getUniqueDictVals(cleanData, selectedQuestion.id, responseSorter);\n        let counts = Utils.getCounts(data, selectedQuestion.id);\n\n        console.log(counts);\n        const barWidth = 75;\n        let chart = c3.generate(merge.all([{\n            bindto: `#${elementId}`,\n            data : { \n                columns: [\n                    [\"count\", ... responseVals.map(x => counts[x])]\n                ],\n                type : \"bar\", \n            },\n            size : {\n                width: $(`#${elementId}`).parent().width()\n            }, \n            color : {\n                pattern : colorPattern || Colors.Categorical\n            },\n            legend : {\n                item : {\n                    onclick : function() {}\n                }, \n                show: false\n            },\n            padding : {\n                left : 200\n            },\n            tooltip: {\n                grouped : false\n            }, \n            bar : {\n                width:{ \n                    ratio: 0.9\n                }\n            }, \n            size : {\n                height: responseVals.length * barWidth\n            },\n            axis : {\n                rotated : true, \n                x : {\n                    type: \"category\", \n                    categories: responseVals\n                }\n            },\n        }, this.props.c3Override || {}]));\n    }\n}","import React from 'react'\nimport FrequencyChartView from './FrequencyChartView'\nimport '../css/CategoricalDisplay.css'\nimport fields from '../config/fields.json'\nimport StatBubble from './StatBubble'\n\nexport default class FrequencyDisplay extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            selectedSurvey : \"All\"\n        };\n    }\n    render() {\n        if(!this.props.question) {\n            return null;\n        }\n        let surveyNames = [\"All\", \"Income Tax\", \"Estate Tax\", \"Health Insurance\", \"Trade Policy\"];\n        let bubbles = surveyNames.map(survey => \n            <div className = \"col-md-3\" style={{marginBottom : \"10px\"}}>\n                <StatBubble \n                    title = { survey }\n                    active = { survey == this.state.selectedSurvey}\n                    handleClick = { (() => this.setState({selectedSurvey : survey})).bind(this) }\n                />\n            </div>\n        );\n        \n        let filteredData = this.props.data.filter(x => this.state.selectedSurvey == \"All\" ||\n                                                    x.survey == this.state.selectedSurvey);\n        return (\n            <div className = \"FrequencyDisplay\">\n                <div className = \"row header\">\n                    <h5>Distribution of responses to:\n                    <br/><strong>{this.props.question.description || this.props.question.title}</strong>\n                    <br/> <br/>\n                    Among {this.state.selectedSurvey.toLowerCase()} respondents. \n                    </h5>\n                </div>\n                <div className = \"row\">\n                    { bubbles }\n                </div>\n                <div className = \"row\">\n                    <FrequencyChartView\n                        survey = { this.props.survey } \n                        data = { filteredData }\n                        selectedQuestion = { this.props.question }\n                    />\n                </div>\n            </div>\n        )\n    }\n\n    cleanData(data) {\n        return data; \n    }\n}","import React from 'react'\nimport '../css/DataDisplay.css'\nimport DataType from '../DataType'\nimport CategoricalDisplay from './CategoricalDisplay'\nimport NumericDisplay from './NumericDisplay'\nimport TreatmentDisplay from './TreatmentDisplay'\nimport KeynessDisplay from './KeynessDisplay'\nimport WordcloudDisplay from './WordcloudDisplay'\nimport UmbrellaDisplay from './UmbrellaDisplay'\nimport FrequencyDisplay from './FrequencyDisplay'\n\nexport default class DataDisplay extends React.Component {\n    render() {\n        let question = this.props.selectedQuestion;\n        let specificDisplay = null;\n        if(!question /* || !this.props.selectedGroup*/) {\n            return null;\n        }\n        switch(question.type) {\n            case DataType.CATEGORICAL:\n                specificDisplay = <CategoricalDisplay \n                    data = { this.props.data }\n                    group = { this.props.selectedGroup }\n                    question = { this.props.selectedQuestion }\n                />\n                break;\n            case DataType.NUMERIC:\n                specificDisplay = <NumericDisplay\n                    data = { this.props.data }\n                    group = { this.props.selectedGroup }\n                    question = { this.props.selectedQuestion }\n                />\n                break;\n            case DataType.FREQUENCY:\n                specificDisplay = <FrequencyDisplay \n                    data = { this.props.data }\n                    question = { this.props.selectedQuestion }\n                />\n                break;\n            case DataType.TREATMENT:\n                specificDisplay =  <TreatmentDisplay\n                    data = { this.props.data }\n                    group = { this.props.selectedGroup }\n                    question = { this.props.selectedQuestion }\n                />\n                break;\n            case DataType.KEYNESS: \n                specificDisplay = <KeynessDisplay \n                    question = { this.props.selectedQuestion }\n                />\n                break;\n            case DataType.WORDCLOUD:\n                specificDisplay = <WordcloudDisplay\n                    question = { this.props.selectedQuestion }\n                />\n                break;\n            case DataType.UMBRELLA:\n                specificDisplay = <UmbrellaDisplay \n                    data = { this.props.data }\n                    group = { this.props.selectedGroup }\n                    question = { this.props.selectedQuestion }\n                />\n                break;\n            default: \n                throw new Error(`Invalid data type for ${ this.props.selectedQuestion.id}`)\n\n        }\n        return (\n            <div className = \"DataDisplay\">\n                { specificDisplay }\n            </div>\n        )\n    }\n     \n}","/* eslint no-undef: \"off\"*/\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport FieldSelect from './FieldSelect'\nimport { surveys, groups } from '../config/fields.json'\nimport NotFound from './NotFound'\nimport DataDisplay from './DataDisplay'\nimport incomeSurveyData from './../json_data/data_income.json'\nimport tradeSurveyData from './../json_data/data_trade.json'\nimport estateSurveyData from './../json_data/data_estate.json'\nimport healthSurveyData from './../json_data/data_health.json'\nimport DataType from '../DataType'\n\nfunction addSurveyType(data, survey_id) {\n    data.forEach(x => x[\"survey\"] = survey_id)\n}\n\naddSurveyType(incomeSurveyData, \"Income Tax\");\naddSurveyType(tradeSurveyData, \"Trade Policy\");\naddSurveyType(estateSurveyData, \"Estate Tax\");\naddSurveyType(healthSurveyData, \"Health Insurance\");\n\nvar dataCache = {\n    \"income_survey\" : incomeSurveyData,\n    \"trade_survey\" : tradeSurveyData, \n    \"estate_survey\" : estateSurveyData,\n    \"health_survey\" : healthSurveyData,\n    \"pooled\" : incomeSurveyData.concat(tradeSurveyData, estateSurveyData, healthSurveyData)\n};\n\n\n// Datatypes that should not allow groups\nconst noGroupTypes = [\n    DataType.KEYNESS,\n    DataType.WORDCLOUD,\n    DataType.MULTICHOICE,\n    DataType.FREQUENCY\n]\n\n\nexport default class DataPage extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            selectedGroup : undefined,\n            selectedTopic : undefined,\n            selectedQuestion : undefined\n        }\n        this.handleGroupSelect = this.handleGroupSelect.bind(this);\n        this.handleTopicSelect = this.handleTopicSelect.bind(this);\n        this.handleQuestionSelect = this.handleQuestionSelect.bind(this); \n    }\n    componentWillMount() {\n        this.surveyId = this.props.surveyId;\n        if (this.surveyId && this.surveyId in surveys) {\n            this.survey = surveys[this.surveyId];\n        }\n        this.groups = {...groups, ... (this.survey.additionalGroups || {})}\n    }\n\n    render() {\n        console.log(this.survey)\n        if(!this.survey) {\n            return <NotFound />\n        }\n        return (\n            <div className = \"container-fluid\">\n                <div className = \"row\">\n                    <div className = \"col-md-4\">\n                        <FieldSelect\n                            title = \"Topic\"\n                            description = \"Select a topic that you would like to examine\"\n                            options = { this.survey.topics }\n                            selected = {this.state.selectedTopic ? this.state.selectedTopic.id : null}\n                            handleSelect = {this.handleTopicSelect}\n                        />\n                    </div>\n                    <div className = \"col-md-4\">\n                        <FieldSelect\n                            title = \"Question\"\n                            description = \"Select a question to examine\"\n                            options = {this.state.selectedTopic ? \n                                this.state.selectedTopic.questions :\n                                null\n                            }\n                            selected = {this.state.selectedQuestion ? this.state.selectedQuestion.id : null}\n                            handleSelect = {this.handleQuestionSelect}\n                        />\n                    </div>\n                    <div className = \"col-md-4\">\n                        {\n                            this.displayGroupSelect() ?\n                            <FieldSelect \n                                title = \"Group by\"\n                                description = \"Select how you would like to group responses\"\n                                options = { this.groups }\n                                selected = {this.state.selectedGroup ? this.state.selectedGroup.id : null}\n                                handleSelect = {this.handleGroupSelect}\n                            />\n                            : null\n                        }\n                    </div> \n                </div>\n                \n                <DataDisplay\n                    data = { this.state.surveyData }\n                    selectedGroup = { this.state.selectedGroup }\n                    selectedQuestion = { this.state.selectedQuestion } \n                />\n            </div>\n        )\n    }\n    // decide whether to display the group\n    displayGroupSelect() {\n        console.log()\n        if (!this.state.selectedTopic) {\n            return false;\n        }\n        if(!this.state.selectedQuestion && !this.state.selectedGroup) {\n            return false;\n        }\n        if (this.state.selectedQuestion && this.state.selectedQuestion.type && noGroupTypes.includes(this.state.selectedQuestion.type)){\n            return false;\n        } \n        return true\n    }\n\n    componentDidMount() {\n        if(!this.survey){\n            return;\n        }\n        document.title = this.survey.title;\n        if(this.surveyId in dataCache) {\n            this.setState({\n                surveyData : dataCache[this.surveyId]\n            });\n        }\n        else {\n            d3.csv(`${process.env.PUBLIC_URL}/data/data_${this.surveyId}.csv`).then((data) => {\n                dataCache[this.surveyId] = data; \n                this.setState({\n                  surveyData : data\n                })\n              });\n        }\n      }\n\n    handleGroupSelect(event) {\n        this.setState({\n            selectedGroup : this.groups[event.target.value]\n        })\n    }\n\n    handleTopicSelect(event) {\n        this.setState({\n            selectedTopic : this.survey.topics[event.target.value],\n            selectedQuestion : undefined,\n            //selectedGroup : undefined\n        })\n    }\n    \n    handleQuestionSelect(event) {\n        let selectedQuestion = this.state.selectedTopic.questions[event.target.value];\n        this.setState({\n            selectedQuestion : selectedQuestion,\n            selectedGroup : noGroupTypes.includes(selectedQuestion.type) ?\n                                null : this.state.selectedGroup\n        })\n    }\n}\n\nDataPage.propTypes = {\n    survey : PropTypes.object\n}","import React from 'react'\nimport \"../css/DemoImage.css\"\n\nexport default class DemoImage extends React.PureComponent {\n    render() {\n        return <img \n            src = {process.env.PUBLIC_URL + \"/demo_images/\" + this.props.src}\n            className = \"demoImage\"\n        />\n    }\n}","import React from 'react'\n\nexport class Section extends React.PureComponent {\n    render() {\n        return <h3 style ={{marginBottom: \"10px\"}}>{this.props.children}</h3>\n    }\n}\n\nexport class Subsection extends React.PureComponent { \n    render() {\n        return <h4>{this.props.children}</h4>\n    }\n}\n\n","import React from 'react'\nimport DemoImage from './DemoImage'\nimport { Section } from './TextComponents'\nimport { NavLink } from 'react-router-dom';\n\nexport default class HomePage extends React.Component {\n    // NOTE: \n    // Make a tab \"About\" with [link to SS website].\n    render() {\n        document.title = \"Understanding Economics\";\n        return (\n            <div className = \"HomePage\">\n                <h2 style = {{marginBottom : \"20px\"}}>Welcome to the Understanding Economics Project!</h2>\n                <img src = {`${process.env.PUBLIC_URL}/home_images/lecture.jpg`} style={{height: \"250px\", marginBottom: \"20px\"}}/>\n\n                <Section>Project</Section>\n\n                <p>\n                The goal of this project is to understand better what people know and learn about economic policies, how they reason about them, and how their support for different policies is determined. \n                </p>\n\n                <p>\n                This website makes the full survey data from this project easy to access and analyze. \n                </p>\n\n                <p>\n                You can explore four big policy issues: Income Tax, Estate Tax, Health Insurance, and Trade Policy. Click on the tab you are interested in to explore the data. \n                </p>\n\n                <Section>How does this website work?</Section>\n\n                <p>\n                This website was designed to enable you to explore and display how the answers to all survey questions are distributed for different categories of population (e.g.: by groups of income, by states in the U.S., by age groups, etc)\n                </p>\n\n                <p>\n                First choose a big issue policy from the tabs above:\n                </p>\n\n                <DemoImage src = \"tabs.png\"/>\n                \n                <p> Then, choose a topic area that you are interested in exploring:</p>\n                \n                <DemoImage src = \"topic.png\" />\n                \n                <p>Choose a specific question within that topic for which you would like to see responses: </p> \n\n                <DemoImage src = \"question.png\"/>\n                \n                <p>Finally, choose a demographic group by which you'd like to see answers to the question organized</p>\n\n                <DemoImage src =\"groupby.png\"/>\n\n                <p>You can explore as many topics, questions, and groups as you'd like. </p>\n\n                <p>\n                Some questions have several formulations (Generic, You, and Gender), which were randomized across respondents in order to compare how people's responses are changed when we change the way we ask the question. \n                </p>\n\n                <p>\n                More information about the project and the surveys can be found <a href = \"https://stefanie-stantcheva.onrender.com\">here</a>\n                </p>\n            </div>\n        )\n    }\n}","import React from 'react'\n\nimport { Section, Subsection} from './TextComponents'\nimport { NavLink } from 'react-router-dom';\n\nexport default class AboutPage extends React.Component {\n    render() {\n        document.title = \"About - Understanding Economics\";\n        return (\n            <div className = \"AboutPage\">\n                <Section>Paper</Section>\n\n                <p>\n                The full paper can be found <a href = \"https://www.dropbox.com/s/zlvzvj8pnqvb1iy/Stantcheva_Understanding_Economics.pdf?dl=0\" target = \"_blank\">here</a>.\n                </p>\n\n                <Section>Additional resources</Section>\n\n                <Subsection>Survey design</Subsection>\n\n                <p>The full survey questionnaire can be found <a href = \"https://www.dropbox.com/s/2evbqrrnodbkzet/Survey_Questionnaires.pdf?dl=0\" target = \"_blank\">here</a>.</p>\n\n                <p>Sometimes, the answers were grouped to reduce the numbers of categories to be displayed. The distribution of respondents characteristics between these categories can be found <NavLink exact to = \"/survey/pooled\">here</NavLink>. </p>\n\n                <p>Unlike the other topic categories, the \"text analysis\" section displays figures from the paper and are not plotted online in real-time. Data has been cleaned in order to be able to compare answers across respondents. The word clouds shows the words that are the most frequently used with a label size proportional to their frequency. The keywords show all groups of 2 words (separated with at most one word) that are significantly more used by one group compared to another group. More about the methodology used <a href = \"https://www.dropbox.com/s/wmr1rk6f59xb35o/Understanding_Economics_Online_Appendix.pdf?dl=0\" target = \"_blank\">here</a>.</p>\n\n                <Subsection>Randomization</Subsection>\n                <p>\n                A randomization consists in creating two groups whose characteristics are comparable in average: approximately same percentage of females, approximately same percentage of unemployed people, and so on and so forth. A group is shown a reference version of the survey while the other is shown a slightly modified one. Here, the modifications can be the formulation of the questions or the fact that some respondents are shown small videos about the policy. Then we compare respondents answers and see if there is a change or not, i.e. if the modifications have an impact on how people respond\n                </p>\n\n                <Subsection>Formulation</Subsection>\n                <p>\n                In each survey, the formulation of many of the questions was randomized. The same root question is asked in three different ways: generic and impersonal (e.g.: \"If the federal personal income tax rate were to increase for the middle class, to what extent would it encourage them to work less?\"). The second formulation is focused directly on the respondent themselves (\"If your federal personal income tax rate were to increase for the middle class, to what extent would it encourage you to work less?\"). The third is specifically about women (\"If the federal personal income tax rate were to increase for women in the middle class, to what extent would it encourage them to work less?\"). The goal is to elicit whether respondents think differently about a generic person, women, or themselves, but without asking the same person different versions of the same question.\n                </p>\n\n                <Subsection>Videos</Subsection>\n\n                <p>\n                The videos are made to assess whether explaining the stakes behind a policy can modify people's perceptions and supports. There are three versions of each video: an \"efficiency\" version, that focuses on comparing costs to benefits, a \"distributional\" version, that focuses on the effects on the distribution of outcomes across the whole population, and an \"economist\" version, that gathers both arguments in order to give a general view of what is at stake with the policy. \n                </p>\n                <ul>\n                    <li>Income <a href = \"https://youtu.be/9xd-RHMiIcE\" target = \"_blank\">Efficiency</a> <a href =\"{https://youtu.be/_vq7ZTjBN3Y\" target = \"_blank\">Distributional</a> <a href = \"https://youtu.be/e3NBmrzEmUQ\" target = \"_blank\">Economist</a></li>\n                    <li>Estate <a href = \"https://www.youtube.com/watch?v=pZ47JuiqoOU\" target = \"_blank\">Efficiency</a> <a href = \"https://www.youtube.com/watch?v=Wz5Xr723tJk\" target = \"_blank\">Distributional</a> <a href = \"https://www.youtube.com/watch?v=qnT07wO8nVA\" target = \"_blank\">Economist</a></li>\n                    <li>Health <a href = \"https://www.youtube.com/watch?v=Nai0nXX6VeQ\" target = \"_blank\">Efficiency</a> <a href = \"https://www.youtube.com/watch?v=Agexfb6apgY\" target = \"_blank\">Distributional</a> <a href = \"https://www.youtube.com/watch?time_continue=5&v=Se3SS4w5kNU\" target = \"_blank\">Economist</a></li>\n                    <li>Trade <a href = \"https://www.youtube.com/watch?v=3GvqLq16e6s\" target = \"_blank\">Efficiency</a> <a href = \"https://www.youtube.com/watch?v=rgvI1g0ldh8\" target = \"_blank\">Distributional</a> <a href = \"https://www.youtube.com/watch?v=5LrbF7TrGq0\" target = \"_blank\">Economist</a></li>\n                </ul>\n\n                \n            </div>\n        )\n    }\n}","import React from 'react';\nimport './App.css';\nimport NavigationBar from './components/NavigationBar'\nimport DataPage from './components/DataPage'\nimport HomePage from './components/HomePage'\nimport AboutPage from './components/AboutPage'\nimport { NavLink, Route, Switch, HashRouter as Router } from 'react-router-dom'\nimport NotFound from './components/NotFound'\nimport { surveys } from './config/fields.json'\n\n\nclass App extends React.Component {\n  constructor() {\n    super(); \n    this.state = {\n      surveyData : null,\n      selectedGroup : null,\n      selectedQuestion : null\n    }\n  }\n  \n  render() {\n    // This is a suboptimal way to do this, but I want to treat each DataPage as a separate component\n    // This way the component mounts and unmounts each time\n    let surveyRoutes = Object.keys(surveys).map(surveyId => {\n        return (\n            <Route exact path ={`/survey/${surveyId}`} component = {() => <DataPage surveyId = {`${surveyId}`}/> } />\n        )\n    })\n\n    \n    return (\n      <Router basename = \"/\">\n          <div className=\"App container\">\n          <NavLink exact to=\"/\">\n              <h2><strong>Understanding Economics</strong></h2>\n          </NavLink> \n          <NavigationBar />\n          <Switch>\n            <Route exact path=\"/\" component={HomePage}/>\n            <Route exact path=\"/about\" component={AboutPage}/>\n            {surveyRoutes}\n            <Route component={NotFound} />\n          </Switch>\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}