---
---
<html>
    <head>
        <title>Understanding Economic Policies</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel ="stylesheet" href = "https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.23.0/pivot.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.11/c3.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script type = "text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/d3/5.14.2/d3.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.11/c3.min.js"></script>
        <script type = "text/javascript" src= "https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.23.0/pivot.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.23.0/c3_renderers.min.js"></script>
        <script type = "text/javascript" src ="js/viz.js"></script>

        <script>
            let rawFields = JSON.parse(decodeURIComponent("{{ site.data.fields | jsonify | uri_escape}}"));
            let page = getUrlVars()["page"]
            window.onload = () => {
                d3.csv(`/assets/data_${page}.csv`).then((data) => {
                    main(rawFields, data, page)
                })
            }
        </script>
    </head>
    <body>
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
        <div id = "main-container" class = "container-fluid">
            <div class ="row">
                <div class = "col-md-4"><h3>Demographic</h3></div>
                <div class = "col-md-4"><h3>Questions</h3></div>
            </div>
            <div class = "row">
                <div class = "col-md-4" style = "padding-right: 0px">
                    <table>
                        <tr>
                            <td>
                                <select size = 10 style = "width: 200px" id = "slctDemo" onchange = "onDemoSelect()">
                                    {% for demo_field in site.data.fields.demographics %}
                                        <option value = "{{ demo_field.id }}">{{ demo_field.title }}</option> 
                                    {% endfor %}
                                </select>
                            </td>
                            <td class = "align-top" style = "padding-left:10px">
                                <div>
                                    <span id = "demoFieldDesc" class = "align-top"></span>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class = "col-md-4" style = "padding-left: 0px">
                    <table>
                        <tr>
                            <td>
                                {% for survey in site.data.fields.surveys %}
                                    <div id = "{{survey.id}}"class = "col-md" style = "padding-right: 0px; display: none">
                                        <select size = 10 style = "width: 200px" id = "slctContent" onchange = "onContentSelect()">
                                            {% for field in survey.questions %}
                                                <option value = "{{ field.id }}" title = "{{ field.description }}">{{ field.title }}</option> 
                                            {% endfor %}
                                            
                                        </select> 
                                    </div>
                                {% endfor %}
                            </td>
                            <td class = "align-top" style="padding-left: 10px;">
                                <div style = "overflow-y:auto; ">
                                    <span id = "contentFieldDesc" class = "align-top"></span>
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class = "row" style = "margin-top: 30px">
                <div id = "chart"></div>
            </div>
            <div class = "row" style = "margin-bottom: 30px">
                <div id = "crosstab">
                </div>
            </div>
        </div>    
    </body>
</html>